if (self.CavalryLogger) { CavalryLogger.start_js(["xZz9s"]); }

__d("FBStoriesPrivacySelectorClickHandler",["Bootloader","CSS","Event","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";a={registerForClick:function(a){var c=a.button,d=a.buttonIcon,e=a.buttonSpinner,f=a.container,g=a.privateSharingOn,h=a.menuAlignh,i=a.menuPosition,j=new(b("SubscriptionsHandler"))();j.addSubscriptions(b("Event").listen(c,"click",function(a){a.stopPropagation(),b("CSS").hide(d),b("CSS").show(e),b("Bootloader").loadModules(["FBStoriesPrivacySelector"],function(a){a.onClick({buttonIcon:d,buttonSpinner:e,container:f,privateSharingOn:g,menuAlignh:h,menuPosition:i})},"FBStoriesPrivacySelectorClickHandler")}));b("Run").onBeforeUnload(function(){j.release()})}};e.exports=a}),null);
__d("ReactFeedSproutsComposerXStoryPost",["BanzaiODS","Bootloader","ComposerStoryCreateMutationWebGraphQLMutation","WebGraphQLLegacyHelper","XWebGraphQLMutationController","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={bootload:function(){b("Bootloader").loadModules(["ReactComposerAsyncRequest"],function(){},"ReactFeedSproutsComposerXStoryPost")},postToStory:function(a){var c=b("ComposerStoryCreateMutationWebGraphQLMutation").__getDocID(),d=b("WebGraphQLLegacyHelper").getURI({controller:b("XWebGraphQLMutationController"),docID:c});c=[{stories:{self:{target_id:a.targetID}}}];var e={actor_id:a.actorID,client_mutation_id:b("uuid")(),source:"WWW",audiences:c,message:{text:a.text,ranges:[]}};b("Bootloader").loadModules(["ReactComposerAsyncRequest"],function(c){c=new c(a.composerID,d).setHandler(a.successHandler).setData({variables:JSON.stringify({client_mutation_id:b("uuid")(),actor_id:a.actorID,input:e})});c.send();b("BanzaiODS").bumpEntityKey(2966,"webgraphml_publish","hit")},"ReactFeedSproutsComposerXStoryPost")}};e.exports=a}),null);
__d("UFI2ReactionIcon.react",["CometReactionIcon.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={reactionBounceAnimation:{animationDuration:"suguu2y7",animationName:"k52jgpo8"}},h=b("React").useEffect,i=b("React").useRef;function a(a){var c=a.shouldAnimateOnFirstRender,d=a.shouldAnimateOnReactionChange,e=a.testid,f=babelHelpers.objectWithoutPropertiesLoose(a,["shouldAnimateOnFirstRender","shouldAnimateOnReactionChange","testid"]),j=i(!1);h(function(){j.current=!0});c=!j.current&&c||j.current&&d;d=c?[g.reactionBounceAnimation,f.xstyle]:f.xstyle;return b("React").jsx(b("CometReactionIcon.react"),{alt:f.alt,reactionType:f.reaction,size:f.size,testid:e,xstyle:d},c?a.reaction:void 0)}e.exports=a}),null);
__d("UFI2ReactionActionLink.react",["ix","cx","requireDeferred","Image.react","React","UFI2ActionLink.react","UFI2CometRelayCreateFragmentContainer","UFI2ReactionIcon.react","UFI2ReactionLink.react","UFI2ReactionUtils","UFICommonInteractionEvents","UFIReactionTypes","stylex","asset","joinClasses","UFI2ReactionActionLink_feedback.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;a=b("UFI2CometRelayCreateFragmentContainer").createFragmentContainer;b("UFI2CometRelayCreateFragmentContainer").graphql;var j=b("requireDeferred")("UFIReactionsAnimatedLikeActionIcon.react"),k={inlineUFIIcon:{marginRight:"qoqs7rgl"}},l=525,m=750,n=null;function o(a){a=(a=a.feedback)==null?void 0:(a=a.viewer_feedback_reaction_info)==null?void 0:a.key;a=b("UFI2ReactionUtils").checkReactionKey(a);return a}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.state={canAnimateLikeIcon:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.props.enableAnimations===!0&&n==null&&j.onReady(function(a){n=a}),this.$1=o(this.props)};d.componentDidUpdate=function(){this.$1=o(this.props)};c.getDerivedStateFromProps=function(a,b){a=o(a);if(b.oldReactionKey==null)return{oldReactionKey:a};else if(b.oldReactionKey!=a)return{canAnimateLikeIcon:!0,oldReactionKey:a};return null};d.shouldAnimateLikeIcon=function(){return this.state.canAnimateLikeIcon&&this.props.enableAnimations===!0};d.render=function(){var a=this.props,c=a.className,d=a.feedback,e=a.feedbackSource,f=a.mutationInputAugmenter,h=a.useDefaultActor,i=a.onReactionError;a=o(this.props);var j;!a?j=b("React").jsx(b("Image.react"),{alt:"",className:"_6rk2",src:this.props.inverse===!0?this.props.filled===!0?g("352555"):g("352559"):g("347022")}):a!==b("UFIReactionTypes").LIKE?j=b("React").jsx(b("UFI2ReactionIcon.react"),{alt:"",reaction:a,shouldAnimateOnFirstRender:Boolean(this.props.enableAnimations)&&(this.$1===b("UFIReactionTypes").NONE||this.$1===b("UFIReactionTypes").LIKE),shouldAnimateOnReactionChange:Boolean(this.props.enableAnimations),size:18,xstyle:k.inlineUFIIcon}):this.shouldAnimateLikeIcon()&&n!=null?j=b("React").jsx(n,{className:"_6rk1"}):j=b("React").jsx(b("Image.react"),{alt:"",className:"_6rk2",src:g("347019")});return b("React").jsx(b("UFI2ActionLink.react"),{showIcon:!j,children:function(a){a=a.className;return b("React").jsx("div",{className:"_666k","data-testid":"UFI2ReactionLink/actionLink",children:b("React").jsx(b("UFI2ReactionLink.react"),{className:b("joinClasses")("_3l2t",a,c),feedback:d,feedbackSource:e,hideDelay:m,interactionEvent:b("UFICommonInteractionEvents").UFI2_STORY_REACTION,mutationInputAugmenter:f,onReactionError:i,showDelay:l,useDefaultActor:h,children:j})})}})};return c}(b("React").Component);c.displayName="UFI2ReactionActionLink";e.exports=a(c,{feedback:i!==void 0?i:i=b("UFI2ReactionActionLink_feedback.graphql")})}),null);
__d("UFI2ReactionsLinkStandalone.react",["FBLogger","React","ReactDOM","RelayAPIConfig","RelayModern","RelayUFI2Environment","UFI2ReactionActionLink.react","UFIVideoPlayerRegistry","XUISpinner.react","UFI2ReactionsLinkStandaloneQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").QueryRenderer;b("RelayModern").graphql;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$3=function(a){__p&&__p();var c=a.error;a=a.props;if(c)return null;if(a==null)return b("React").jsx(b("XUISpinner.react"),{className:d.props.spinnerClassName,size:"small"});var e=a.feedback;if(!e){b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",d.props.queryVariables.feedbackTargetID||"UNKNOWN").mustfix("Query is missing feedback data.");return null}return b("React").jsx(b("UFI2ReactionActionLink.react"),{className:d.props.className,feedback:e,feedbackSource:d.props.feedbackSource,filled:!0,inverse:d.props.inverse,mutationInputAugmenter:function(a){return d.$1(e,a)},reactionIconClassName:d.props.reactionIconClassName,useDefaultActor:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(a,b){if(b.feedback_reaction===0)return b;var c=this.$2(a);if(c!=null){return babelHelpers["extends"]({},b,{time_anchor:{time:c,type:((c=a.associated_video)==null?void 0:c.is_live_streaming)===!0?"LIVE_VIDEO":"ON_DEMAND_VIDEO"}})}return b};d.$2=function(a){a=(a=a.associated_video)==null?void 0:a.id;var c=b("ReactDOM").findDOMNode(this);if(a==null||!(c instanceof Element))return;c=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(c,a);if(c==null)return;return Math.floor(c)};d.render=function(){var a=this.props.queryVariables;return b("React").jsx(h,{environment:b("RelayUFI2Environment").forActor(b("RelayAPIConfig").actorID),fetchPolicy:"store-and-network",query:c.query,render:this.$3,variables:babelHelpers["extends"]({},a)})};return c}(b("React").Component);a.query=g!==void 0?g:g=b("UFI2ReactionsLinkStandaloneQuery.graphql");e.exports=a}),null);
__d("UFI2ReactionsLinkStandaloneWhenVisible.react",["OnVisible.react","React","UFI2ReactionsLinkStandalone.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={wasEverVisible:!1},c.$1=function(){c.setState({wasEverVisible:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return this.state.wasEverVisible?b("React").jsx(b("UFI2ReactionsLinkStandalone.react"),babelHelpers["extends"]({},this.props)):b("React").jsx(b("OnVisible.react"),{onVisible:this.$1,children:b("React").jsx("div",{})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("UFI2ComposerAction.react",["requireCond","cr:844029","React","UFI2TooltipCometCompatWrapper.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!1,d.state={initializeComponentClicked:!1,popoverShown:!1,shouldBeginBootloading:!1},d.$2=function(a){d.$1=!1,d.props.placeholder.props.onBlur&&d.props.placeholder.props.onBlur(a)},d.$3=function(a){d.$1=!0,d.$4(),d.props.placeholder.props.onFocus&&d.props.placeholder.props.onFocus(a)},d.$5=function(a){d.$4(),d.props.placeholder.props.onMouseUp&&d.props.placeholder.props.onMouseUp(a),d.setState(function(a){a=a.initializeComponentClicked;return{initializeComponentClicked:!a}})},d.$6=function(a){d.$4(),d.props.placeholder.props.onMouseOver&&d.props.placeholder.props.onMouseOver(a)},d.$7=function(a){if(a!=null&&d.$1){d.$1=!1;if(b("cr:844029")!=null)b("cr:844029").set(a,!0);else try{a.focus()}catch(a){}}},d.$8=function(a){d.setState({popoverShown:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$4=function(){this.state.shouldBeginBootloading||this.setState({shouldBeginBootloading:!0})};d.render=function(){var a=this.state,c=a.popoverShown;a=a.shouldBeginBootloading;var d=this.props,e=d.resource;d=d.label;var f=b("React").cloneElement(this.props.placeholder,{hasBeenClicked:this.state.initializeComponentClicked,onBlur:this.$2,onFocus:this.$3,onMouseOver:this.$6,onMouseUp:this.$5});return b("React").jsx(b("UFI2TooltipCometCompatWrapper.react"),{alignH:"center",delayMountUntilHover:!0,position:"above",tooltip:c?null:d,children:b("React").jsx(b("React").Suspense,{fallback:f,children:a?b("React").jsx(e,babelHelpers["extends"]({onFocusableElementRefChange:this.$7,onTogglePopover:this.$8},this.props.createComponentProps({clicked:this.state.initializeComponentClicked}))):f})})};return c}(b("React").Component);e.exports=a}),null);
__d("UFI2ComposerActionPlaceholder.react",["cx","requireCond","cr:1232139","React","UFI2LinkWrapper.react","cr:1232140"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=null;if(this.props.hasBeenClicked===!0){b("cr:1232140")!=null?a=b("React").jsx(b("cr:1232140"),{className:"_2wv6",size:"small"}):b("cr:1232139")!=null&&(a=b("React").jsx("div",{className:"_2wv6",children:b("React").jsx(b("cr:1232139"),{color:"disabled",dimension:12,duration:1.2,type:"estimated"})}));return a}return b("React").jsx(b("UFI2LinkWrapper.react"),{"aria-label":this.props.label,className:this.props.buttonClassName,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onMouseOver:this.props.onMouseOver,onMouseUp:this.props.onMouseUp,role:"button",children:b("React").jsx("div",{className:this.props.iconClassName})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("UFI2ComposerActions.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").jsx("ul",{className:"_1obb",children:b("React").Children.map(a.children,function(a){return b("React").jsx("li",{className:"_1obc",children:a})})})}e.exports=a}),null);
__d("UFI2ComposerPreviewArea.react",["cx","CloseButton.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.children,d=a.className,e=a.onRemoveClick,f=a.removeButtonLabel;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","onRemoveClick","removeButtonLabel"]);return b("React").jsxs("div",babelHelpers["extends"]({},a,{className:b("joinClasses")(d,"_1llh"),children:[c,b("React").jsx(b("CloseButton.react"),{ariaLabel:f,className:"_1lli",onClick:e,tooltip:f})]}))}e.exports=a}),null);
__d("isUFI2ComposerStateEmpty",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var b=a.attachment;a=a.inputState;if(b!=null)return!1;switch(a.__type){case"editor-state-based":return!a.editorState.getCurrentContent().hasText();case"plain-text":return!(a.text&&a.text.trim().length);default:return a.__type}}e.exports=a}),null);
__d("UFI2ProgressiveComposerInput.react",["cx","invariant","requireDeferred","Event","FBLogger","Keys","React","ReactDOMSelection","SubscriptionsHandler","Vector","clearImmediate","clearTimeout","emptyFunction","getActiveElement","getPlainTextFromUFI2InputState","getScrollableAreaContainingNode","ifRequired","isSoftNewlineEvent","isUFI2ComposerStateEmpty","joinClasses","setImmediateAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Keys").BACKSPACE,j=b("Keys").DELETE,k=b("Keys").RETURN,l=b("requireDeferred")("UFI2RichComposerInput.react"),m=b("requireDeferred")("getEditorStateFromUFI2ComposerState");function n(a){a=a.innerText||"";a.replace(/(\r\n|\r|\n)/g,"")===""&&(a="");return a}function o(){return b("ifRequired")("EditorState",function(a){var b=l.getModuleIfRequired();return b!=null?{EditorState:a,UFI2RichComposerInput:b}:null},function(){return null})}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!1,d.$2=!1,d.$3=null,d.$4=new(b("SubscriptionsHandler"))(),d.state={proxyIsInCompositionMode:!1},d.$7=function(a){d.$8()},d.$9=function(a){d.setState({proxyIsInCompositionMode:!0})},d.$10=function(a){d.setState({proxyIsInCompositionMode:!1})},d.$11=function(a){d.$8()},d.$12=function(a){d.$13(a.target)},d.$14=function(a){d.$3=a,d.props.onInputRefUpdated&&d.props.onInputRefUpdated(a)},d.$15=function(a){a.keyCode===k&&!b("isSoftNewlineEvent")(a)?(a.preventDefault(),d.props.onCommit()):(a.keyCode===i||a.keyCode===j)&&d.$8()},d.$16=function(a){d.$2=!0;var c=b("setTimeoutAcrossTransitions")(function(){b("FBLogger")("ufi2").warn("_handleProxyMouseDown had no corresonding mouseup event for 30s.")},3e4);d.$4.addSubscriptions({remove:function(){b("clearTimeout")(c)}});var e=b("Event").listen(document,"mouseup",function(){b("clearTimeout")(c),d.$2=!1,d.$4.releaseOne(e),d.$3!=null&&d.$3===b("getActiveElement")()&&d.$5()});d.$4.addSubscriptions(e)},d.$17=function(a){var b=d.props.handlePastedFiles;if(b){var c=a.clipboardData;c=c.items!=null?Array.from(c.items):[];c=c.map(function(a){return a.getAsFile()}).filter(Boolean);c.length&&(b(c)==="handled"&&a.preventDefault())}a.isDefaultPrevented()===!1&&d.$8()},d.$19=function(a){var c=function(){d.$2===!1&&d.$5()};m.getModuleIfRequired()==null?m.loadImmediately(function(){return c()}):c();var e=o();(e==null?void 0:e.UFI2RichComposerInput)==null&&l.loadImmediately(b("emptyFunction"));d.props.onFocus&&d.props.onFocus(a)},c)||babelHelpers.assertThisInitialized(d)}c.createEmptyComposerState=function(){var a=o();a=a==null?void 0:a.EditorState;return a!=null?{__type:"editor-state-based",editorState:a.createEmpty()}:{__type:"plain-text",selectionOffsets:null,text:""}};var d=c.prototype;d.$5=function(){__p&&__p();var a=this,c=m.getModuleIfRequired();if(c==null||this.state.proxyIsInCompositionMode===!0||this.props.composerState.inputState.__type!=="plain-text")return;var d=this.$3,e=b("Vector").getScrollPosition(),f=d?b("getScrollableAreaContainingNode")(d):null;this.props.onComposerStateChange(function(d){var e=d.inputState;if(e.__type!=="plain-text"){b("FBLogger")("ufi2").warn("We were asked to commit the text and selection state of the proxy input, but the current input state is of type `%s` when we expected it to be of type `plain-text`. Investigate why a reference to the proxy input existed when the input state was of this type.",e.__type);return d}e=babelHelpers["extends"]({},d,{inputState:babelHelpers["extends"]({},e,{selectionOffsets:b("getActiveElement")()===a.$3?b("ReactDOMSelection").getOffsets(a.$3):e.selectionOffsets})});return babelHelpers["extends"]({},d,{inputState:{__type:"editor-state-based",editorState:c(e)}})},function(){if(f){var a=f.getScrollTop();f.setScrollTop(a,!1)}else window.scrollTo(e.x,e.y)})};d.$6=function(){b("isUFI2ComposerStateEmpty")(this.props.composerState)!==!0&&this.$5()};d.$13=function(a){this.$1=!1;var b=n(a);this.props.onComposerStateChange(function(a){var c=a.inputState;c.__type==="plain-text"||h(0,5554,c.__type);return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},c,{text:b})})})};d.$18=function(a){__p&&__p();if(a.composerState.inputState.__type!=="plain-text")return;var c=this.$3;if(c){a=a.composerState.inputState;var d,e;switch(a.__type){case"plain-text":d=a.text;e=a.selectionOffsets;break;case"editor-state-based":default:d=a.editorState.getCurrentContent().getBlockMap().map(function(a){return a?a.getText():""}).join("\n");b("FBLogger")("ufi2").warn("Unimplemented: tried to update the UFI2 proxy input's selection using an `EditorState` but we have not yet implemented a function that maps from an `EditorState` to selection offsets.");break}e==null&&(e=b("getActiveElement")()===c?b("ReactDOMSelection").getOffsets(c):null);a=n(c);d!==a&&(c.textContent=d,e!=null&&(d===""?(c.innerText="\xa0",b("ReactDOMSelection").setOffsets(c,{end:1,start:1}),document.execCommand("delete",!1,null)):b("ReactDOMSelection").setOffsets(c,e)))}};d.$8=function(){var a=this;if(this.$1)return;this.$1=!0;var c=b("setImmediateAcrossTransitions")(function(){a.$1&&(a.$1=!1,a.$3&&a.$13(a.$3))});this.$4.addSubscriptions({remove:function(){b("clearImmediate")(c)}})};d.componentDidMount=function(){var a=this,b=this.props.composerState.inputState;this.$3&&b.__type==="plain-text"&&this.$18(this.props);b=o();(b==null?void 0:b.UFI2RichComposerInput)==null&&this.$4.addSubscriptions(l.onReady(function(b){a.props.composerState.inputState.__type==="editor-state-based"&&a.forceUpdate()}))};d.componentDidUpdate=function(a,b){this.props.composerState.inputState.__type==="plain-text"&&this.$6(),this.$18(this.props)};d.componentWillUnmount=function(){this.$4.release()};d.execCommand=function(a){this.props.handleCommand&&(a.__type==="PrefillMention"&&(l.loadImmediately(b("emptyFunction")),this.$5()),this.props.handleCommand(a))};d.render=function(){var a=o(),c=b("getPlainTextFromUFI2InputState")(this.props.composerState.inputState).trim()!=="";a=a==null?void 0:a.UFI2RichComposerInput;var d=this.props.depth?"UFI2ComposerInput/reply":"UFI2ComposerInput/comment";return a&&this.props.composerState.inputState.__type==="editor-state-based"?b("React").jsx(a,babelHelpers["extends"]({},this.props,{className:b("joinClasses")("_65tb",this.props.className),composerState:this.props.composerState,onClick:this.props.onClick,onCommit:this.props.onCommit,onComposerStateChange:this.props.onComposerStateChange,onInputRefUpdated:this.props.onInputRefUpdated,placeholder:this.props.placeholder,webDriverTestID:d+":rich-input"})):b("React").jsx("div",{className:this.props.className,onClick:this.props.onClick,children:b("React").jsxs("div",{className:"_7c-l",children:[b("React").jsx("div",{className:(this.props.composerState.isLocked?"_65tc":"")+" _65td",contentEditable:this.props.composerState.isLocked===!1,"data-testid":d+":proxy-input",onBeforeInput:this.$7,onBlur:this.props.onBlur,onCompositionEnd:this.$10,onCompositionStart:this.$9,onCut:this.$11,onFocus:this.$19,onInput:this.$12,onKeyDown:this.$15,onMouseDown:this.$16,onPaste:this.$17,ref:this.$14}),c?null:b("React").jsx("div",{className:"_7c-t",children:this.props.placeholder})]})})};return c}(b("React").Component);e.exports=a}),null);
__d("getCommentDataFromComposerState",["UnicodeUtils","emptyFunction","textProbablyWritingMarkdown"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(a){__p&&__p();var c=a.attachmentMappers,d=a.composerState,e=a.contentBlockToTextWithEntitiesInputMessageMappers,f=d.attachment;a=d.feedbackID;var h=d.inputState,i=d.inReplyToComment,j=d.replyTargetClicked,k=d.usedWritingHelpToCompose,l=d.formattingStyle;c=f&&(f.__type==="ExistingAttachment"?[]:c.map(function(a){return a(f)}).filter(Boolean));var m={};switch(h.__type){case"plain-text":l==="PLAIN_TEXT"&&b("textProbablyWritingMarkdown")(h.text)&&(l="MARKDOWN");return{commentData:{attachments:c,feedback_id:a,formatting_style:l,message:{text:h.text},reply_comment_parent_fbid:i==null?void 0:i.id,reply_target_clicked:j},entitiesByID:m,usedWritingHelpToCompose:k===!0};case"editor-state-based":default:h=h.editorState;var n=[],o=[],p=0;h.getCurrentContent().getBlockMap().forEach(function(a){__p&&__p();var c="",d=0;a.findEntityRanges(b("emptyFunction").thatReturnsTrue,function(f,h){__p&&__p();var i=e.some(function(e){__p&&__p();e=e(a,f,h);var i=a.getText().slice(0,f),j=Math.max(0,i.length-(g||(g=b("UnicodeUtils"))).strlen(i));if(e!=null){i=e.entitiesByID;e=e.message;Object.assign(m,i);c+=e.text;e.ranges&&o.push.apply(o,e.ranges.map(function(a){return a?babelHelpers["extends"]({},a,{offset:a.offset+p-j+d}):a}));d+=e.text.length-(h-f);return!0}return!1});i===!1&&(c+=a.getText().slice(f,h).replace("@[","@ ["))});p+=(g||(g=b("UnicodeUtils"))).strlen(c)+1;n.push(c)});h=n.join("\n");if(h.trim()===""&&f==null)return null;l==="PLAIN_TEXT"&&b("textProbablyWritingMarkdown")(h)&&(l="MARKDOWN");return{commentData:{attachments:c,feedback_id:a,file_marker:d.fileMarker,formatting_style:l,insights_point_json:d.insightsPoint,message:{ranges:o,text:h},reply_comment_parent_fbid:i==null?void 0:i.id,reply_target_clicked:j},entitiesByID:m,usedWritingHelpToCompose:k===!0}}}e.exports=a}),null);
__d("composeUFI2Plugins",[],(function(a,b,c,d,e,f){"use strict";function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){return function(){return a(b.apply(void 0,arguments))}})}e.exports=a}),null);
__d("withReparentingGuard",["React","getReactComponentDisplayName","isReactClassComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();function c(c){__p&&__p();var d,e,f=b("isReactClassComponent")(c)?c:function(a){babelHelpers.inheritsLoose(d,a);function d(){return a.apply(this,arguments)||this}var e=d.prototype;e.render=function(){return b("React").jsx(c,babelHelpers["extends"]({},this.props))};return d}(b("React").Component),g;function h(b){b&&(g&&g!==b&&a(c),g=b)}var i=b("getReactComponentDisplayName")(c);return e=d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(f,babelHelpers["extends"]({},this.props,{ref:h}))};return c}(b("React").Component),d.displayName="withReparentingGuard("+i+")",e}return c}e.exports=a}),null);
__d("createUFI2ComposerPlugin",["FBLogger","withReparentingGuard"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("withReparentingGuard")(function(a){var c;a=(c=(c=a.displayName)!=null?c:a.name)!=null?c:"Unknown";c="The UFI2 comment composer plugin that wraps the `"+a+"` component caused it to be reparented. Learn how to remedy this mustfix here: https://fburl.com/ufi-composer-plugins-must-never-reparent-wrapped-components";b("FBLogger")("ufi2").blameToPreviousFile().mustfix(c)})(a)}e.exports=a}),null);
__d("createUFI2ComposerPluginPipeline",["React","composeUFI2Plugins"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a.length===0)return function(a){var c=a.render;a=babelHelpers.objectWithoutPropertiesLoose(a,["render"]);return b("React").jsx(c,babelHelpers["extends"]({},a))};var c=a;return function(a){__p&&__p();babelHelpers.inheritsLoose(d,a);function d(){var d,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(d=e=a.call.apply(a,[this].concat(g))||this,e.state={Pipeline:b("composeUFI2Plugins").apply(void 0,c)(e.props.render),mirroredRenderProp:e.props.render},d)||babelHelpers.assertThisInitialized(e)}d.getDerivedStateFromProps=function(a,d){return d.mirroredRenderProp!==a.render?{Pipeline:b("composeUFI2Plugins").apply(void 0,c)(a.render),mirroredRenderProp:a.render}:null};var e=d.prototype;e.render=function(){var a=this.props;a.render;a=babelHelpers.objectWithoutPropertiesLoose(a,["render"]);var c=this.state.Pipeline;return b("React").jsx(c,babelHelpers["extends"]({},a))};return d}(b("React").Component)}e.exports=a}),null);
__d("UFI2InsertEmojiComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("lazyLoadComponent")(b("JSResource")("UFI2EmojiInputButton.react").__setRef("UFI2InsertEmojiComposerAction.react"));function a(a){var c=h._("Insert an emoji");return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(b){b=b.clicked;return{buttonClassName:"_1t9_ _1ta3",iconActiveClassName:"UFICommentEmojiIconActive",iconClassName:"InsertEmoji",initiallyVisible:b,onComposerStateChange:a.onComposerStateChange}},label:c,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _1ta3",iconClassName:"InsertEmoji",label:c}),resource:i})}e.exports=a}),null);
__d("createUFI2EmojiComposerActionComponentPlugin",["requireDeferred","React","createUFI2ComposerPlugin","ifRequired","injectSubscriptionsHandler.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("requireDeferred")("getUpgradedUFI2EmojiComposerPlugin");function a(a){__p&&__p();return function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){__p&&__p();var c,d;for(var f=arguments.length,h=new Array(f),i=0;i<f;i++)h[i]=arguments[i];return(c=d=e.call.apply(e,[this].concat(h))||this,d.state={upgradedPlugin:b("ifRequired").call(null,"getUpgradedUFI2EmojiComposerPlugin",function(b){return b(a)})},d.$1=function(a,b){if(d.state.upgradedPlugin!=null)return d.state.upgradedPlugin.handleKeyCommand(d.props.inputProps,a,b);else return d.props.inputProps.handleKeyCommand?d.props.inputProps.handleKeyCommand(a,b):"not-handled"},d.$2=function(a){g.loadImmediately(d.$3),d.props.inputProps.onFocus&&d.props.inputProps.onFocus(a)},d.$3=function(b){d.state.upgradedPlugin||d.setState({upgradedPlugin:b(a)})},c)||babelHelpers.assertThisInitialized(d)}var f=d.prototype;f.componentDidMount=function(){this.state.upgradedPlugin||this.props.subscriptionsHandler.addSubscriptions(g.onReady(this.$3))};f.render=function(){return b("React").jsx(c,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{composerState:this.state.upgradedPlugin?this.state.upgradedPlugin.installEmojiInputDecorator(this.props.inputProps.composerState):this.props.inputProps.composerState,handleKeyCommand:this.$1,onFocus:this.$2})}))};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(d))}}e.exports=a}),null);
__d("createUFI2EmojiComposerPlugin",["React","UFI2InsertEmojiComposerAction.react","createUFI2ComposerPlugin","createUFI2EmojiComposerActionComponentPlugin","injectSubscriptionsHandler.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=function(a){var c=function(d){babelHelpers.inheritsLoose(c,d);function c(){return d.apply(this,arguments)||this}var e=c.prototype;e.render=function(){return b("React").jsx(a,babelHelpers["extends"]({},this.props,{actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2InsertEmojiComposerAction.react"),{onComposerStateChange:this.props.inputProps.onComposerStateChange},"emojiComposerAction")])}))};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(c))};return[c,b("createUFI2EmojiComposerActionComponentPlugin")(a)]}e.exports=a}),null);
__d("createUFI2EmoticonsComposerPlugin",["requireDeferred","React","createUFI2ComposerPlugin","injectSubscriptionsHandler.react","invokeDeferredFunctionIfRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("requireDeferred")("getUpgradedUFI2EmoticonsComposerPlugin");function a(a){__p&&__p();return function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){var c,d;for(var f=arguments.length,h=new Array(f),i=0;i<f;i++)h[i]=arguments[i];return(c=d=e.call.apply(e,[this].concat(h))||this,d.state={upgradedPlugin:b("invokeDeferredFunctionIfRequired")(g,a)},d.$1=function(a){g.loadImmediately(d.$2),d.props.inputProps.onFocus&&d.props.inputProps.onFocus(a)},d.$2=function(b){d.state.upgradedPlugin||d.setState({upgradedPlugin:b(a)})},c)||babelHelpers.assertThisInitialized(d)}var f=d.prototype;f.componentDidMount=function(){this.state.upgradedPlugin?this.state.upgradedPlugin.installPlugin(this.props):this.props.subscriptionsHandler.addSubscriptions(g.onReady(this.$2))};f.componentDidUpdate=function(a,b){b.upgradedPlugin==null&&this.state.upgradedPlugin!=null&&this.state.upgradedPlugin.installPlugin(this.props)};f.render=function(){if(this.state.upgradedPlugin)return this.state.upgradedPlugin.render(this.props,c);else return b("React").jsx(c,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{onFocus:this.$1})}))};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(d))}}e.exports=a}),null);
__d("UFI2InsertGIFComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","gkx","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("lazyLoadComponent")(b("JSResource")("UFI2InsertGIFButton.react").__setRef("UFI2InsertGIFComposerAction.react")),j=b("lazyLoadComponent")(b("JSResource")("CometUFIInsertGIFButton.react").__setRef("UFI2InsertGIFComposerAction.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.onComposerStateChange,d=a.onDisplaySearch,e=a.ftentidentifier,f=h._("Post a GIF");return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(a){a=a.clicked;return{buttonClassName:"_1t9_ _1ny6",ftentidentifier:e,iconActiveClassName:"_1ny9",iconClassName:"_1nyp",initiallyVisible:a,label:f,onComposerStateChange:c,onDisplaySearch:d}},label:f,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _1ny6",iconClassName:"_1nyp",label:f}),resource:b("gkx")("708253")?j:i})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("createUFI2GIFComposerActionComposerPlugin",["cx","fbt","UFI2NUXConfig","React","UFI2ComposerPreviewArea.react","Image.react","createUFI2ComposerPlugin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();b("UFI2NUXConfig");var i="GIF";function j(a){return a.attachment&&a.attachment.__type===i?a.attachment.data:null}function a(){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){var a,b;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return(a=b=d.call.apply(d,[this].concat(e))||this,b.$1=function(a){b.props.inputProps.onComposerStateChange(function(a){return{attachment:null}})},a)||babelHelpers.assertThisInitialized(b)}var e=c.prototype;e.componentDidMount=function(){this.props.onInstallAttachmentMappers(function(a){return a.__type===i?{link:{external:{url:a.data.source.url}}}:null})};e.componentDidUpdate=function(a){__p&&__p();var b=this.props.inputProps.composerState;a=a.inputProps.composerState;var c=j(b);if(a.attachment==null&&c&&j(a)==null){c=b.inputState;a=!1;switch(c.__type){case"plain-text":a=c.text.trim()!=="";break;case"editor-state-based":a=c.editorState.getCurrentContent().getPlainText().trim()!=="";break;default:c.__type}a===!1&&this.props.inputProps.onCommit()}};e.render=function(){var c=this.props.inputProps.composerState;c=j(c);return b("React").jsxs("div",{className:"_17pg",children:[b("React").jsx(a,babelHelpers["extends"]({},this.props)),c?b("React").jsx(b("UFI2ComposerPreviewArea.react"),{onRemoveClick:this.$1,removeButtonLabel:h._("Remove GIF"),children:b("React").jsx(b("Image.react"),{className:"_17pj mas",height:c.media.preview.height,src:c.media.preview.url,width:c.media.preview.width})}):null]})};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(c)}}e.exports=a}),null);
__d("createUFI2GIFComposerPlugin",["cx","React","UFI2InsertGIFComposerAction.react","UFI2NUXConfig","createUFI2ComposerPlugin","createUFI2GIFComposerActionComposerPlugin","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=!1;function a(a){__p&&__p();var c=function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){var a,c;for(var d=arguments.length,f=new Array(d),g=0;g<d;g++)f[g]=arguments[g];return(a=c=e.call.apply(e,[this].concat(f))||this,c.state={NUXVisible:!1},c.$1=function(a){h||(h=!0,c.setState({NUXVisible:!0})),c.props.inputProps.onFocus!=null&&c.props.inputProps.onFocus(a)},c.$2=function(){c.setState({NUXVisible:!1})},c.action=b("React").createRef(),a)||babelHelpers.assertThisInitialized(c)}var f=d.prototype;f.render=function(){var d=this,e=this.props.inputProps.composerState;return b("React").jsxs("div",{className:"_17pg",children:[b("React").jsx(c,babelHelpers["extends"]({},this.props,{actions:e.attachment?this.props.actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2InsertGIFComposerAction.react"),{ftentidentifier:b("qex")._("1000665")?a.ftentidentifier:null,onComposerStateChange:this.props.inputProps.onComposerStateChange,onDisplaySearch:this.$2,ref:this.action},"gifComposerAction")]),inputProps:babelHelpers["extends"]({},this.props.inputProps,{onFocus:this.$1})})),b("UFI2NUXConfig").UFI2GIFNUX&&this.state.NUXVisible?b("React").jsx(b("UFI2NUXConfig").UFI2GIFNUX,{contextRef:function(){return d.action.current},onClose:this.$2}):null]})};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(d)};return[c,b("createUFI2GIFComposerActionComposerPlugin")()]}e.exports=a}),null);
__d("createUFI2HashtagComposerPlugin",["requireDeferred","React","createUFI2ComposerPlugin","injectSubscriptionsHandler.react","invokeDeferredFunctionIfRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("requireDeferred")("getUpgradedUFI2HashtagComposerPlugin");function a(){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){var a,c;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(a=c=d.call.apply(d,[this].concat(f))||this,c.state={upgradedPlugin:b("invokeDeferredFunctionIfRequired")(g)},c.$1=function(a){g.loadImmediately(c.$2),c.props.inputProps.onFocus&&c.props.inputProps.onFocus(a)},c.$2=function(a){c.state.upgradedPlugin||c.setState({upgradedPlugin:a()})},a)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.componentDidMount=function(){this.state.upgradedPlugin||this.props.subscriptionsHandler.addSubscriptions(g.onReady(this.$2))};e.render=function(){return b("React").jsx(a,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{composerState:this.state.upgradedPlugin?this.state.upgradedPlugin.installHashtagInputDecorator(this.props.inputProps.composerState):this.props.inputProps.composerState,onFocus:this.$1})}))};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(c))}}e.exports=a}),null);
__d("createBsgCannedCommentsUFI2ComposerPlugin",["React","RelayFBMatchContainer","createUFI2ComposerPlugin","gkx","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();return function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){var a,b;for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return(a=b=e.call.apply(e,[this].concat(d))||this,b.state={focused:!1},b.$1=function(a){b.setState({focused:!0}),b.props.inputProps.onFocus&&b.props.inputProps.onFocus(a)},b.$2=function(a){b.setState({focused:!1}),b.props.inputProps.onBlur&&b.props.inputProps.onBlur(a)},a)||babelHelpers.assertThisInitialized(b)}var f=d.prototype;f.getMatchedComponent=function(){return b("React").jsx(b("React").Suspense,{fallback:null,children:b("React").jsx(b("RelayFBMatchContainer"),{match:a.feedback.marketplace_canned_comments,props:babelHelpers["extends"]({},this.props,{focused:this.state.focused,marketplaceCannedComments:a.feedback.marketplace_canned_comments})})})};f.getShowCannedComments=function(){if(a.feedback.marketplace_canned_comments===null||this.props.inputProps.depth!==0)return!1;return a.renderLocation==="product_details"?b("qex")._("872575")===!0:b("gkx")("920152")};f.render=function(){var a=this.getShowCannedComments();return b("React").jsxs(b("React").Fragment,{children:[a?this.getMatchedComponent():null,b("React").jsx(c,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{onBlur:this.$2,onFocus:this.$1})}))]})};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(d)}}e.exports=a}),null);
__d("UFI2MediaUploadComposerAction.react",["cx","fbt","Event","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","UFICommentFileInputAcceptValues","injectSubscriptionsHandler.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("lazyLoadComponent")(b("JSResource")("UFI2MediaUploadButton.react").__setRef("UFI2MediaUploadComposerAction.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var b=a.target.files.item(0);d.props.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{attachment:{__type:"Media",reference:{__type:"File",file:b}}})})},d.$2=function(a){a=document.createElement("input");a.setAttribute("accept",b("UFICommentFileInputAcceptValues").both);a.setAttribute("type","file");d.props.subscriptionsHandler.addSubscriptions(b("Event").listen(a,"change",d.$1));a.click()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this,c=this.props.hasErrored?h._("There was a problem attaching the file, please try again"):h._("Attach a photo or video");return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(b){b=b.clicked;return{fileIsHoveringOverDropTarget:a.props.fileIsHoveringOverDropTarget,hasErrored:a.props.hasErrored,initialUploadDialogIsOpen:b,label:c,onComposerStateChange:a.props.onComposerStateChange}},label:c,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _7ja_",iconClassName:(this.props.fileIsHoveringOverDropTarget?"_3n42":"")+(!this.props.fileIsHoveringOverDropTarget&&!this.props.hasErrored?" _3n43":"")+(this.props.hasErrored?" _3nb4":""),label:c,onMouseUp:this.$2}),resource:i})};return c}(b("React").Component);a.defaultProps={fileIsHoveringOverDropTarget:!1,hasErrored:!1};e.exports=b("injectSubscriptionsHandler.react")(a)}),null);
__d("mimeTypeIsAcceptableToUFI2MediaUploadPlugin",["isMimeTypeForMedia"],(function(a,b,c,d,e,f){"use strict";var g=b("isMimeTypeForMedia").isMimeTypeForPhoto,h=b("isMimeTypeForMedia").isMimeTypeForVideo;function a(a){return g(a)||h(a)}e.exports=a}),null);
__d("indexOfFirstItemInDataTransferAcceptableToUFI2MediaUploadPlugin",["mimeTypeIsAcceptableToUFI2MediaUploadPlugin"],(function(a,b,c,d,e,f){"use strict";function g(a){return a.kind==="file"&&b("mimeTypeIsAcceptableToUFI2MediaUploadPlugin")(a.type)}function a(a){var b=a.items;a=a.types;return b==null||a==null||Array.from(a).includes("Files")===!1?-1:Array.from(b).findIndex(function(a){return g(a)})}e.exports=a}),null);
__d("createUFI2MediaUploadComposerPlugin",["cx","fbt","Bootloader","ProgressBar.react","React","UFI2ComposerPreviewArea.react","UFI2MediaUploadComposerAction.react","createUFI2ComposerPlugin","ifRequired","indexOfFirstItemInDataTransferAcceptableToUFI2MediaUploadPlugin","injectSubscriptionsHandler.react","mimeTypeIsAcceptableToUFI2MediaUploadPlugin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,b){a.inputProps.onComposerStateChange(function(a){return{attachment:{__type:"Media",reference:{__type:"File",file:b}}}})}function j(a){return((a=a.attachment)==null?void 0:a.__type)==="Media"}function k(a,b,c){if(b==="ufi-commit"){var d=a.inputProps.composerState;d=d&&d.attachment&&d.attachment.__type==="Media"&&d.attachment.reference.__type;if(d==="File"||d==="UploadingFile")return"handled"}return a.inputProps.handleKeyCommand?a.inputProps.handleKeyCommand(b,c):"not-handled"}function a(a){__p&&__p();return function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){__p&&__p();var c,d;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=d=e.call.apply(e,[this].concat(g))||this,d.$1=0,d.$2=!1,d.state={fileIsHoveringOverDropTarget:!1,upgradedPlugin:b("ifRequired")("getUpgradedUFI2MediaUploadComposerPlugin",function(b){return b(a)},function(){return null}),uploadError:null},d.$4=function(a){d.$1++;var c=a.dataTransfer;if(c==null)return;b("indexOfFirstItemInDataTransferAcceptableToUFI2MediaUploadPlugin")(c)!==-1&&(a.preventDefault(),d.$1>0&&d.setState({fileIsHoveringOverDropTarget:!0}))},d.$5=function(a){d.$1--,d.$1===0&&d.setState({fileIsHoveringOverDropTarget:!1})},d.$7=function(a){var b=a.dataTransfer;b!=null&&d.$3(a,b);d.$1=0;d.setState({fileIsHoveringOverDropTarget:!1})},d.$8=function(a){if(a.isDefaultPrevented())return;var b=a.clipboardData;if(b==null)return;d.$3(a,b)},d.$9=function(a){a=a.find(function(a){return b("mimeTypeIsAcceptableToUFI2MediaUploadPlugin")(a.type)});if(a){i(d.props,new Blob([a],{type:a.type}));return"handled"}return"not-handled"},d.$10=function(a){d.props.inputProps.onComposerStateChange(function(a){return{attachment:null}})},c)||babelHelpers.assertThisInitialized(d)}var f=d.prototype;f.$3=function(a,c){if(c==null)return;var d=b("indexOfFirstItemInDataTransferAcceptableToUFI2MediaUploadPlugin")(c);if(d===-1)return;c=Array.from(c.items);c=d<c.length?c[d].getAsFile():null;c!=null&&(a.preventDefault(),i(this.props,c))};f.$6=function(a){var c=a.dataTransfer;if(c==null)return;b("indexOfFirstItemInDataTransferAcceptableToUFI2MediaUploadPlugin")(c)!==-1&&a.preventDefault()};f.$11=function(){var c=this;if(this.state.upgradedPlugin||this.$2)return;this.$2=!0;this.props.subscriptionsHandler.addSubscriptions(b("Bootloader").loadModules(["getUpgradedUFI2MediaUploadComposerPlugin"],function(b){c.setState({upgradedPlugin:b(a)})},"createUFI2MediaUploadComposerPlugin"))};f.componentDidMount=function(){this.state.upgradedPlugin?this.state.upgradedPlugin.installPlugin(this.props,this.state,this.setState.bind(this)):this.$12()&&this.$11()};f.$12=function(){if(this.state.upgradedPlugin||this.$2)return!1;var a=this.props.inputProps.composerState;return a.attachment!=null&&a.attachment.__type==="Media"};f.componentDidUpdate=function(a,b){b.upgradedPlugin==null&&this.state.upgradedPlugin!=null&&this.state.upgradedPlugin.installPlugin(this.props,this.state,this.setState.bind(this)),this.state.upgradedPlugin?this.state.upgradedPlugin.componentDidUpdate(a,this.props,this.state,this.setState.bind(this)):this.$12()&&this.$11()};f.render=function(){var a=this;if(this.state.upgradedPlugin)return this.state.upgradedPlugin.render(this.props,this.state,this.setState.bind(this),this.$4,this.$5,this.$6,this.$7,k,this.$8,this.$9,c);var d=j(this.props.inputProps.composerState),e=b("React").jsx(c,babelHelpers["extends"]({},this.props,{actions:this.props.inputProps.composerState.attachment?this.props.actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2MediaUploadComposerAction.react"),{fileIsHoveringOverDropTarget:this.state.fileIsHoveringOverDropTarget,hasErrored:!1,onComposerStateChange:this.props.inputProps.onComposerStateChange},"mediaUploadComposerAction")]),inputProps:babelHelpers["extends"]({},this.props.inputProps,{handleKeyCommand:function(b,c){return k(a.props,b,c)},handlePastedFiles:this.$9})})),f=h._("Cancel upload");return b("React").jsxs("div",{className:"_25-w",onDragEnter:this.$4,onDragLeave:this.$5,onDragOver:this.$6,onDrop:this.$7,children:[e,d?b("React").jsx(b("UFI2ComposerPreviewArea.react"),{onRemoveClick:this.$10,removeButtonLabel:f,children:b("React").jsx(b("ProgressBar.react"),{label:h._("{value}\u0025",[h._param("value","0")]),value:0})}):null]})};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(d))}}e.exports=a}),null);
__d("createUFI2MentionsComposerPlugin",["Bootloader","React","Run","createUFI2ComposerPlugin","ifRequired","injectSubscriptionsHandler.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();return function(c){__p&&__p();var d=!1,e=function(f){__p&&__p();babelHelpers.inheritsLoose(e,f);function e(){var c,e;for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];return(c=e=f.call.apply(f,[this].concat(h))||this,e.state={characterOffset:0,mentionableEntities:[],selectedMentionableEntity:null,upgradedPlugin:b("ifRequired").call(b("ifRequired"),a.upgradedPluginResource.getModuleId(),function(b){return b(a,d)},function(){return null})},e.$1=!1,e.$3=function(a){d=!1,e.props.inputProps.onBlur&&e.props.inputProps.onBlur(a)},e.$4=function(a){d=!0,e.$2(),e.props.inputProps.onFocus&&e.props.inputProps.onFocus(a)},c)||babelHelpers.assertThisInitialized(e)}var g=e.prototype;g.componentDidMount=function(){var a=this;this.state.upgradedPlugin!=null?this.state.upgradedPlugin.installPlugin(this.props):this.props.subscriptionsHandler.addSubscriptions(b("Run").onAfterLoad(function(){return a.$2()}))};g.componentDidUpdate=function(a,b){b.upgradedPlugin==null&&this.state.upgradedPlugin!=null&&this.state.upgradedPlugin.installPlugin(this.props),this.state.upgradedPlugin&&this.state.upgradedPlugin.componentDidUpdate(a,b,this.props,this.state,this.setState.bind(this))};g.componentWillUnmount=function(){this.state.upgradedPlugin&&this.state.upgradedPlugin.componentWillUnmount()};g.$2=function(){var c=this;if(this.$1||this.state.upgradedPlugin)return;this.$1=!0;this.props.subscriptionsHandler.addSubscriptions(b("Bootloader").loadModules.call(b("Bootloader"),[a.upgradedPluginResource.getModuleId()],function(b){c.setState({upgradedPlugin:b(a,d)})}))};g.render=function(){var a=this.props;a.subscriptionsHandler;a=babelHelpers.objectWithoutPropertiesLoose(a,["subscriptionsHandler"]);if(this.state.upgradedPlugin)return this.state.upgradedPlugin.render(this.props,this.state,this.setState.bind(this),c);else return b("React").jsx(c,babelHelpers["extends"]({},a,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{onBlur:this.$3,onFocus:this.$4})}))};return e}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(e))}}e.exports=a}),null);
__d("createUFI2PrefillMentionComposerPlugin",["requireDeferred","FBLogger","React","UFIODSLogger","createUFI2ComposerPlugin","injectSubscriptionsHandler.react","invokeDeferredFunctionIfRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("requireDeferred")("getUpgradedUFI2PrefillMentionComposerPlugin");function a(){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){var a,c;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(a=c=d.call.apply(d,[this].concat(f))||this,c.state={upgradedPlugin:b("invokeDeferredFunctionIfRequired")(g)},c.$1=function(a){var d=c.state.upgradedPlugin;d?(a.__type==="PrefillMention"&&b("UFIODSLogger").bump("prefill_mention_plugin.prefill_requested.with_implementation","relay"),d.handleCommand(a,c.props.inputProps)):(a.__type==="PrefillMention"&&(b("UFIODSLogger").bump("prefill_mention_plugin.prefill_requested.without_implementation","relay"),b("FBLogger")("ufi2").warn("Someone called for the composer to be prefilled with a mention before the prefill code had loaded. Nothing fatal happened, but the users involved experienced a degraded experience; the original author of the comment that was being replied to was likely not mentioned, hence they might not have been notified of the reply.")),c.props.inputProps.handleCommand&&c.props.inputProps.handleCommand(a))},a)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.componentDidMount=function(){var a=this;this.state.upgradedPlugin||this.props.subscriptionsHandler.addSubscriptions(g.onReady(function(b){a.setState({upgradedPlugin:b()})}))};e.render=function(){return b("React").jsx(a,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{handleCommand:this.$1})}))};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(c))}}e.exports=a}),null);
__d("createUFI2AssociateReplyWithParentComposerPlugin",["React","createUFI2ComposerPlugin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){__p&&__p();var a,b;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return(a=b=d.call.apply(d,[this].concat(e))||this,b.$1=function(a){var c=b.props.inputProps;if(a.__type==="SetReplyAssociation"){var d=a.commentBeingRepliedTo;d!=null?c.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{inReplyToComment:d})}):c.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{inReplyToComment:void 0})})}c.handleCommand&&c.handleCommand(a)},a)||babelHelpers.assertThisInitialized(b)}var e=c.prototype;e.render=function(){return b("React").jsx(a,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{handleCommand:this.$1})}))};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(c)}}e.exports=a}),null);
__d("createUFI2SetReplyClickedComposerPlugin",["React","createUFI2ComposerPlugin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){var a,b;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return(a=b=d.call.apply(d,[this].concat(e))||this,b.$1=function(a){var c=b.props.inputProps;a.__type==="SetReplyClicked"&&c.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{replyTargetClicked:!0})});c.handleCommand&&c.handleCommand(a)},a)||babelHelpers.assertThisInitialized(b)}var e=c.prototype;e.render=function(){return b("React").jsx(a,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{handleCommand:this.$1})}))};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(c)}}e.exports=a}),null);
__d("UFI2InsertStarsComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("lazyLoadComponent")(b("JSResource")("UFI2InsertStarsButton.react").__setRef("UFI2InsertStarsComposerAction.react"));function a(a){var c=h._("Attach Stars");return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(b){b=b.clicked;return{buttonClassName:"_1t9_ _88o2",feedbackID:a.feedbackID,iconActiveClassName:"_88o3",iconClassName:"_88o4",initiallyVisible:b,label:c,onComposerStateChange:a.onComposerStateChange}},label:c,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _88o2",iconClassName:"_88o4",label:c}),resource:i})}e.exports=a}),null);
__d("createUFI2StarsComposerActionComposerPlugin",["ix","cx","fbt","FlexLayout.react","Image.react","React","TetraText.react","UFI2ComposerPreviewArea.react","asset","createUFI2ComposerPlugin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a){return a.attachment&&a.attachment.__type==="Stars"?a.attachment.amount:null}function a(a){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){var a,b;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return(a=b=d.call.apply(d,[this].concat(e))||this,b.$1=function(a){b.props.inputProps.onComposerStateChange(function(a){return{attachment:null}})},a)||babelHelpers.assertThisInitialized(b)}var e=c.prototype;e.componentDidMount=function(){this.props.onInstallAttachmentMappers(function(a){return a.__type==="Stars"?{stars:{amount:a.amount}}:null})};e.$2=function(a){return b("React").jsxs(b("FlexLayout.react"),{align:"center",className:"_3-8i",children:[b("React").jsx(b("Image.react"),{className:"_3-8s",src:g("647932")}),b("React").jsx(b("TetraText.react"),{type:"bodyLink4",children:i._("{star quantity} Stars",[i._param("star quantity",a)])})]})};e.render=function(){var c=j(this.props.inputProps.composerState);return b("React").jsxs("div",{children:[b("React").jsx(a,babelHelpers["extends"]({},this.props)),c!=null?b("React").jsx(b("UFI2ComposerPreviewArea.react"),{onRemoveClick:this.$1,removeButtonLabel:i._("Remove stars"),children:this.$2(c)}):null]})};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(c)}}e.exports=a}),null);
__d("createUFI2StarsComposerPlugin",["React","UFI2InsertStarsComposerAction.react","createUFI2ComposerPlugin","createUFI2StarsComposerActionComposerPlugin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=function(c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){return e.apply(this,arguments)||this}var f=d.prototype;f.render=function(){return b("React").jsx(c,babelHelpers["extends"]({},this.props,{actions:this.props.inputProps.composerState.attachment||this.props.inputProps.depth>0||this.props.inputProps.commentAction!=="ADD"?this.props.actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2InsertStarsComposerAction.react"),{feedbackID:a.feedbackID,onComposerStateChange:this.props.inputProps.onComposerStateChange},"starsComposerAction")])}))};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(d)};return[c,b("createUFI2StarsComposerActionComposerPlugin")({environment:a.environment,feedbackID:a.feedbackID})]}e.exports=a}),null);
__d("UFI2InsertStickerComposerAction.react",["cx","fbt","JSResource","React","UFI2ComposerAction.react","UFI2ComposerActionPlaceholder.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("lazyLoadComponent")(b("JSResource")("UFI2InsertStickerButton.react").__setRef("UFI2InsertStickerComposerAction.react"));function a(a){var c=h._("Post a sticker");return b("React").jsx(b("UFI2ComposerAction.react"),{createComponentProps:function(b){b=b.clicked;return{buttonClassName:"_1t9_ _2r-o",feedbackID:a.feedbackID,iconActiveClassName:"_2r-q",iconClassName:"_2r-r",initiallyVisible:b,label:c,onComposerStateChange:a.onComposerStateChange,targetID:a.targetID}},label:c,placeholder:b("React").jsx(b("UFI2ComposerActionPlaceholder.react"),{buttonClassName:"_1t9_ _2r-o",iconClassName:"_2r-r",label:c}),resource:i})}e.exports=a}),null);
__d("createUFI2StickersComposerActionComposerPlugin",["cx","fbt","Bootloader","FBLogger","LoadingIndicator.react","React","UFI2ComposerPreviewArea.react","createUFI2ComposerPlugin","ifRequired","injectSubscriptionsHandler.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){return a.attachment&&a.attachment.__type==="Sticker"?a.attachment.id:null}function a(a){__p&&__p();return function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){__p&&__p();var c,d;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=d=e.call.apply(e,[this].concat(g))||this,d.$1=!1,d.state={upgradedPlugin:b("ifRequired")("getUpgradedUFI2StickersComposerPlugin",function(b){return b(a)},function(){return null})},d.$2=function(a){d.props.inputProps.onComposerStateChange(function(a){return{attachment:null}})},d.$3=function(a){d.props.inputProps.onComposerStateChange(function(){return{attachment:null}}),b("FBLogger")("ufi2").catching(a).mustfix("Encountered an error while rendering a sticker.")},c)||babelHelpers.assertThisInitialized(d)}var f=d.prototype;f.$4=function(c){var d=b("React").jsx(b("LoadingIndicator.react"),{className:"_1rwi mal",color:"blue",size:"small"});if(this.state.upgradedPlugin)return this.state.upgradedPlugin.renderSticker(a.environment,d,this.$3,c);else return d};f.$5=function(){if(this.state.upgradedPlugin||this.$1)return!1;var a=this.props.inputProps.composerState;return a.attachment!=null&&a.attachment.__type==="Sticker"};f.$6=function(){var c=this;if(this.state.upgradedPlugin||this.$1)return;this.props.subscriptionsHandler.addSubscriptions(b("Bootloader").loadModules(["getUpgradedUFI2StickersComposerPlugin"],function(b){c.setState({upgradedPlugin:b(a)})},"createUFI2StickersComposerActionComposerPlugin"))};f.componentDidMount=function(){this.props.onInstallAttachmentMappers(function(a){return a.__type==="Sticker"?{media:{id:a.id}}:null}),this.$5()&&this.$6()};f.componentDidUpdate=function(a){__p&&__p();var b=this.props.inputProps.composerState;a=a.inputProps.composerState;var c=i(b);if(this.props.inputProps.commentAction==="ADD"&&b.updateSource==="UFI2InsertStickerButton"&&a.attachment==null&&c!=null&&i(a)==null){c=b.inputState;a=!1;switch(c.__type){case"plain-text":a=c.text.trim()!=="";break;case"editor-state-based":a=c.editorState.getCurrentContent().getPlainText().trim()!=="";break;default:c.__type}a===!1&&this.props.inputProps.onCommit()}this.$5()&&this.$6()};f.render=function(){var a=i(this.props.inputProps.composerState);return b("React").jsxs("div",{className:"_1rwk",children:[b("React").jsx(c,babelHelpers["extends"]({},this.props)),a!=null?b("React").jsx(b("UFI2ComposerPreviewArea.react"),{onRemoveClick:this.$2,removeButtonLabel:h._("Remove sticker"),children:this.$4(a)}):null]})};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(d))}}e.exports=a}),null);
__d("createUFI2StickersComposerPlugin",["React","UFI2InsertStickerComposerAction.react","createUFI2ComposerPlugin","createUFI2StickersComposerActionComposerPlugin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=function(c){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){return e.apply(this,arguments)||this}var f=d.prototype;f.render=function(){return b("React").jsx(c,babelHelpers["extends"]({},this.props,{actions:this.props.inputProps.composerState.attachment?this.props.actions:[].concat(this.props.actions,[b("React").jsx(b("UFI2InsertStickerComposerAction.react"),{feedbackID:this.props.inputProps.composerState.feedbackID,onComposerStateChange:this.props.inputProps.onComposerStateChange,targetID:a.targetID},"stickersComposerAction")])}))};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(d)};return[c,b("createUFI2StickersComposerActionComposerPlugin")({environment:a.environment,targetID:a.targetID})]}e.exports=a}),null);
__d("createUFI2ComposerTipPlugin",["cx","React","createUFI2ComposerPlugin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();return function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){return e.apply(this,arguments)||this}var f=d.prototype;f.render=function(){if(this.props.inputProps.commentAction==="EDIT")return b("React").jsx(c,babelHelpers["extends"]({},this.props));var d=this.props.inputProps.isCommentDenied;return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(c,babelHelpers["extends"]({},this.props)),d!==!0&&b("React").jsx("div",{className:"_6g0t fcg fss",children:a.composer_tip})]})};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(d)}}e.exports=a}),null);
__d("createUFI2LiveTypingBroadcastComposerPlugin",["Bootloader","React","createUFI2ComposerPlugin","ifRequired","injectSubscriptionsHandler.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();return function(c){__p&&__p();var d=function(e){__p&&__p();babelHelpers.inheritsLoose(d,e);function d(){var c,d;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=d=e.call.apply(e,[this].concat(g))||this,d.$1=!1,d.$2=!1,d.state={upgradedPlugin:b("ifRequired")("getUpgradedUFI2LiveTypingBroadcastComposerPlugin",function(b){return b(a)},function(){return null})},c)||babelHelpers.assertThisInitialized(d)}var f=d.prototype;f.componentWillUnmount=function(){this.state.upgradedPlugin!=null&&this.state.upgradedPlugin.componentWillUnmount()};f.$3=function(){var c=this;if(this.state.upgradedPlugin||this.$1)return;this.$1=!0;this.props.subscriptionsHandler.addSubscriptions(b("Bootloader").loadModules(["getUpgradedUFI2LiveTypingBroadcastComposerPlugin"],function(b){b=b(a);b.onBootload(c.props,c.state,c.$2);c.setState({upgradedPlugin:b})},"createUFI2LiveTypingBroadcastComposerPlugin"))};f.render=function(){__p&&__p();var a=this;if(this.state.upgradedPlugin!=null)return this.state.upgradedPlugin.render(this.props,this.state,c);else return b("React").jsx(c,babelHelpers["extends"]({},this.props,{inputProps:babelHelpers["extends"]({},this.props.inputProps,{onBlur:function(b){a.props.inputProps.onBlur&&a.props.inputProps.onBlur(b);if(b.isDefaultPrevented())return;a.$2=!1},onFocus:function(b){a.props.inputProps.onFocus&&a.props.inputProps.onFocus(b);if(b.isDefaultPrevented())return;a.$2=!0;a.$3()}})}))};return d}(b("React").Component);return b("createUFI2ComposerPlugin")(b("injectSubscriptionsHandler.react")(d))}}e.exports=a}),null);
__d("getComposerStateSnapshotter",["memoizeWithArgsWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a){a=a.inputProps;var b=a.depth;a=a.composerState.feedbackID;return JSON.stringify({depth:b,feedback:{id:a}})}function a(a){var b=h(a);return{clear:function(){g["delete"](b)},get:function(){return g.get(b)},set:function(a){g.set(b,a)}}}e.exports=b("memoizeWithArgsWeak")(a)}),null);
__d("createUFI2ComposerStateSnapshotComposerPlugin",["React","createUFI2ComposerPlugin","getComposerStateSnapshotter","killswitch"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){var a,b;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return(a=b=d.call.apply(d,[this].concat(e))||this,b.$1=!1,b.$2=function(a){var c=b.props.inputProps.composerState;c=c.inputState.__type==="editor-state-based"?c.inputState.editorState.getCurrentContent().getPlainText():c.inputState.text;c!==""&&(b.$1=!0);b.props.inputProps.onComposerStateChange(a)},b.$3=function(){b.$1=!1,b.props.snapshotter.clear(),b.props.inputProps.onCommit()},a)||babelHelpers.assertThisInitialized(b)}var e=c.prototype;e.componentDidMount=function(){var a=this.props,b=a.snapshotter,c=a.initialComposerState;a=a.inputProps;if(c!=null)return;var d=b.get();d!=null&&a.onComposerStateChange(function(a){return d});b.clear()};e.componentWillUnmount=function(){this.$1&&this.props.snapshotter.set(this.props.inputProps.composerState)};e.render=function(){var c=this.props;c.snapshotter;var d=c.inputProps;c=babelHelpers.objectWithoutPropertiesLoose(c,["snapshotter","inputProps"]);return b("React").jsx(a,babelHelpers["extends"]({},c,{inputProps:babelHelpers["extends"]({},d,{onCommit:this.$3,onComposerStateChange:this.$2})}))};return c}(b("React").Component);function d(a){return b("React").jsx(c,babelHelpers["extends"]({},a,{snapshotter:b("getComposerStateSnapshotter")(a)}))}return b("createUFI2ComposerPlugin")(d)}}e.exports=b("killswitch")("UFI2_COMPOSER_STATE_SNAPSHOT_PLUGIN")?function(){return null}:a}),null);
__d("setFocusOnUFI2ComposerInputState",["FBLogger","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=a.inputState;switch(c.__type){case"editor-state-based":return b("ifRequired")("EditorState",function(b){return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},c,{editorState:b.moveFocusToEnd(c.editorState)})})},function(){b("FBLogger")("ufi2").mustfix("Tried to set focus on a composer state whose inputState was of type `editor-state-based` but the EditorState module has not yet been defined. It should not be possible to produce a composer state of that type without the `EditorState` module being defined. Investigate why.");return a});case"plain-text":default:var d=c.text.length;return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},c,{selectionOffsets:{end:d,start:d}})})}}e.exports=a}),null);
__d("UFI2CommentActionLink.react",["cx","fbt","React","UFI2AbstractButtonWrapper.react","UFI2ActionLink.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=a.className,d=a.inverse,e=a.onClick;return b("React").jsx(b("UFI2ActionLink.react"),{children:function(a){a=a.className;return b("React").jsx(b("UFI2AbstractButtonWrapper.react"),{className:b("joinClasses")((d?"_6r34":"")+" _666h",a,c),href:"#",label:h._("Comment"),onClick:e,role:"button",tabIndex:0,testid:"UFI2CommentLink",title:h._("Leave a comment")})}})}a.displayName="UFI2CommentActionLink";e.exports=a}),null);
__d("UFI2PrivateReplyActionLink.react",["cx","React","UFI2ActionLink.react","UFI2CometRelayCreateFragmentContainer","UFI2PrivateReplyLink.react","UFI2PrivateReplyActionLink_feedback.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("UFI2CometRelayCreateFragmentContainer").createFragmentContainer;b("UFI2CometRelayCreateFragmentContainer").graphql;function a(a){var c=a.feedback,d=a.feedbackSource;a=a.seeResponseLabel;return b("React").jsx(b("UFI2PrivateReplyLink.react"),{WrapperComponent:function(a){return b("React").jsx(b("UFI2ActionLink.react"),babelHelpers["extends"]({},a,{linkClassName:"_6dc2"}))},feedback:c,feedbackSource:d,seeResponseLabel:a})}a.displayName="UFI2PrivateReplyActionLink";d=c(a,{feedback:h!==void 0?h:h=b("UFI2PrivateReplyActionLink_feedback.graphql")});e.exports=d}),null);
__d("UFI2LocalUserAction",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("EventEmitter"))()}),null);
__d("UFI2ShareActionLink.react",["cx","fbt","invariant","Promise","ActorURI","AsyncDialog","AsyncRequest","Bootloader","CurrentUser","JSResource","React","TrackingNodes","UFI2ActionLink.react","UFI2CometRelayCreateFragmentContainer","UFI2LocalUserAction","UFI2PrimerDialogWrapper.react","UFICommonInteractionEvents","UFICommonInteractionLogger","URI","XShareDialogController","XUISpinner.react","clearTimeout","joinClasses","lazyLoadComponent","qex","setTimeoutAcrossTransitions","UFI2ShareActionLink_feedback.graphql","UFI2ShareActionLink_shareableConfig.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l;a=b("UFI2CometRelayCreateFragmentContainer").createFragmentContainer;b("UFI2CometRelayCreateFragmentContainer").graphql;var m=b("lazyLoadComponent")(b("JSResource")("UFIShareNowMenu.react").__setRef("UFI2ShareActionLink.react"));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=!1,d.$3=!1,d.$4=null,d.$5=b("React").createRef(),d.state={focusOnInit:!1,interacted:!1,isLoading:!1,misinformationDialogConfirmed:!1,openAfterMisinformationConfirmed:!1,openAfterPagePostInterceptionConfirmed:!1,openOnInit:!1},d.$6=function(){d.$1!=null&&(b("UFICommonInteractionLogger").endInteraction(d.$1),d.$1=null),d.$3=!0,d.$7()},d.$8=function(){d.$3=!1},d.$9=function(){var a=d.props,c=a.feedbackTargetID;a=a.shareableConfig;var e=a==null?void 0:a.misinformation_confirm_dialog_uri;e!=null||i(0,866);b("Bootloader").loadModules(["ShareWarningFactCheckLinkLogger"],function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(new(l||(l=b("URI")))(e).getUnqualifiedURI()).setRelativeTo(d.$5.current),function(b){b.subscribe("confirm",function(){d.setState({misinformationDialogConfirmed:!0,openAfterMisinformationConfirmed:!0})}),a.addReshareLoggingToDialog(b,c)})},"UFI2ShareActionLink.react");d.$7()},d.$11=function(){d.$1==null&&!d.$3&&(d.$1=b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI2_SHARE_DIALOG_OPENS))},d.$13=function(){if(d.$2)return;d.setState({focusOnInit:!0,interacted:!0})},d.$14=function(){d.$2||d.$15()},d.$16=function(){d.$2=!0},d.$17=function(){d.setState({interacted:!0})},d.$15=function(){d.setState({interacted:!0,openOnInit:!0},function(){b("clearTimeout")(d.$4),d.$4=b("setTimeoutAcrossTransitions")(function(){return d.setState(function(a){return a.openOnInit?{isLoading:!0}:null})},300)}),d.$11()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){b("clearTimeout")(this.$4)};d.$7=function(){b("UFI2LocalUserAction").emit("share",{feedbackNodeToken:this.props.feedbackTargetID})};d.$10=function(a){__p&&__p();var c=this;b("Bootloader").loadModules(["PagePostEngagementFrictionActions","PagePostEngagementFictionDialogStrings","promiseDone"],function(d,e,f){__p&&__p();var g=new(b("Promise"))(function(b,c){d.showReshareEngagementFrictionDialog(a,function(){return b(!0)},function(){return b(!1)},function(){b(!1);var c=e.getStrings(a);d.goToPage(c.pageId)})}).then(function(a){a&&(c.setState({interacted:!0,openAfterPagePostInterceptionConfirmed:!0}),c.$11())},function(a){throw a});f(g)},"UFI2ShareActionLink.react")};d.$12=function(a){this.$7();var c=b("CurrentUser").isWorkUser()?b("XShareDialogController").getURIBuilder().setEnum("default_audience","group").getURI():b("XShareDialogController").getURIBuilder().getURI();a!=null&&b("AsyncDialog").send(new(b("AsyncRequest"))(c).setData({id:a.shareable_id,parent_fbid:a.shared_from_post_id,type:a.share_type}).setRelativeTo(this.$5.current))};d.render=function(){__p&&__p();var a=this,c,d=this.props,e=d.className,f=d.linkClassName,g=d.feedback,h=d.feedbackTargetID,i=d.inverse;d=d.shareableConfig;var j=this.state,k=j.focusOnInit,o=j.interacted,p=j.isLoading,q=j.misinformationDialogConfirmed,r=j.openAfterMisinformationConfirmed,s=j.openOnInit;if(!d||!d.share_action_link_uri)return null;g=g==null?void 0:(j=g.viewer_actor)==null?void 0:j.id;j=d==null?void 0:d.misinformation_confirm_dialog_uri;var t=d==null?void 0:d.intercept_for_page_post,u=d==null?void 0:(c=d.share_action_link_primer_attributes)==null?void 0:c.rel,v=new(l||(l=b("URI")))(d==null?void 0:d.share_action_link_uri);c=d==null?void 0:d.share_now_menu_uri;if(j&&!q)return b("React").jsx(b("UFI2ActionLink.react"),{linkClassName:f,children:function(c){c=c.className;return b("React").jsx(n,{className:c,inverse:i,onClick:a.$9})}});if(t&&!this.$3&&!this.state.openAfterPagePostInterceptionConfirmed)return b("React").jsx(b("UFI2ActionLink.react"),{linkClassName:f,children:function(c){c=c.className;return b("React").jsx(n,{className:c,inverse:i,onClick:function(b){return a.$10(h)}})}});var w;g&&(v=v&&b("ActorURI").create(v,g),w=c&&new(l||(l=b("URI")))(c).addQueryData("actor_id",g));if(!w)return b("React").jsx(b("UFI2ActionLink.react"),{linkClassName:f,children:function(c){c=c.className;return b("React").jsx(n,{className:c,href:v,inverse:i,onClick:function(){return a.$7()},openDialogOnMount:r,rel:u})}});var x={isLoading:p,onClick:this.$14,onFocus:this.$13,onMouseDown:this.$16,onMouseOver:this.$17,onMouseUp:this.$15,openDialogOnMount:r},y=w.getQueryData();return b("React").jsx(b("UFI2ActionLink.react"),{linkClassName:f,children:function(c){c=c.className;return b("React").jsx("span",{className:b("joinClasses")("_1j6m",e),children:w&&o?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(n,babelHelpers["extends"]({},x,{className:c,inverse:i})),children:b("React").jsx(m,{className:"_6800",endpoint:w.getPath(),endpointData:y,focusOnInit:k,onHide:a.$8,onShow:a.$6,openOnInit:s||a.state.openAfterPagePostInterceptionConfirmed,children:b("React").jsx(n,{className:c,inverse:i,onClick:b("qex")._("1087397")?function(){return a.$12(y)}:function(){return a.$7()},onMouseUp:a.$11})})}):b("React").jsx(n,babelHelpers["extends"]({},x,{className:c,inverse:i}))})}})};return c}(b("React").Component);c.displayName="UFI2ShareActionLink";var n=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){var a,b;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=b=c.call.apply(c,[this].concat(e))||this,b.$1=null,b.$2=function(a){b.$1=a},b.$3=function(a){var c=b.props.onClick;c&&(a.preventDefault(),c(a))},a)||babelHelpers.assertThisInitialized(b)}var d=a.prototype;d.componentDidMount=function(){var a=this.props.openDialogOnMount;a===!0&&this.$1&&this.$1.click()};d.render=function(){var a=this.props,c=a.className,d=a.isLoading,e=a.rel;a.href;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","isLoading","rel","href"]);var f=this.props.href&&!this.props.href.isEmpty()?this.props.href.getUnqualifiedURI():"#",g=b("CurrentUser").isWorkUser()?h._("Send this to coworkers or post it on your timeline."):h._("Send this to friends or post it on your timeline."),i='{ "tn": "'+b("TrackingNodes").encodeTN(b("TrackingNodes").types.SHARE_LINK)+'", "type": 25 }';d=d===!0?b("React").jsx(b("XUISpinner.react"),{className:"_2nj6"}):null;return e==="dialog"?b("React").jsx(b("UFI2PrimerDialogWrapper.react"),{Component:"a",props:babelHelpers["extends"]({},a,{children:b("React").jsxs(b("React").Fragment,{children:[h._("Share"),d]}),className:b("joinClasses")((this.props.inverse?"_6r37":"")+" _2nj7",c),"data-ft":i,href:f.toString(),onClick:this.$3,ref:this.$2,rel:e,role:"button",tabIndex:0,title:g})}):b("React").jsxs("a",babelHelpers["extends"]({},a,{className:b("joinClasses")((this.props.inverse?"_6r37":"")+" _2nj7",c),"data-ft":i,href:f,onClick:this.$3,ref:this.$2,rel:e,role:"button",tabIndex:0,title:g,children:[h._("Share"),d]}))};return a}(b("React").Component);e.exports=a(c,{feedback:j!==void 0?j:j=b("UFI2ShareActionLink_feedback.graphql"),shareableConfig:k!==void 0?k:k=b("UFI2ShareActionLink_shareableConfig.graphql")})}),null);
__d("UFI2ActorSelector.react",["cx","BizSiteIdentifier.brands","JSResource","PageVoiceDropdownSelector.react","React","Run","UFI2CometRelayCreateFragmentContainer","UFI2NUXConfig","UFIODSLogger","emptyFunction","isEmpty","joinClasses","lazyLoadComponent","UFI2ActorSelector_feedback.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;a=b("UFI2CometRelayCreateFragmentContainer").createFragmentContainer;b("UFI2CometRelayCreateFragmentContainer").graphql;var j=b("lazyLoadComponent")(b("JSResource")("UFI2ActorSelectorNUX.react").__setRef("UFI2ActorSelector.react")),k=!1;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var d,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(d=e=a.call.apply(a,[this].concat(g))||this,e.root=b("React").createRef(),e.state=c.getDerivedStateFromProps(e.props),e.$1=function(){return e.setState({showNUX:!1})},e.$2=function(a){b("UFIODSLogger").bump("actor_selector.on_change","relay"),e.props.onActorChange(a.value)},d)||babelHelpers.assertThisInitialized(e)}c.getDerivedStateFromProps=function(a,b){__p&&__p();var c,d;a=a.feedback;c=(c=(c=(c=a.viewer_actor)==null?void 0:c.id)!=null?c:(c=a.account_actor)==null?void 0:c.id)!=null?c:"";if(!a.can_see_voice_switcher)return{actorData:{},selectedActorID:c,showNUX:Boolean(b&&b.showNUX),userID:c};d=(d=(d=a.voice_switcher_actors)==null?void 0:d.nodes)!=null?d:[];var e={};d.forEach(function(a){var b=a.id;if(b){e[b]={name:a.name,thumbSrc:(b=a.profile_picture)==null?void 0:b.uri}}});a=(d=a.account_actor)==null?void 0:d.id;(a==null||!(a in e))&&(a=c);return{actorData:e,selectedActorID:c,showNUX:Boolean(b&&b.showNUX),userID:a}};var d=c.prototype;d.componentDidMount=function(){var a=this;b("UFIODSLogger").bump("actor_selector.component_did_mount","relay");!k&&b("UFI2NUXConfig").shouldShowActorSelectorNUX&&(k=!0,b("Run").onAfterLoad(function(){a.setState({showNUX:!0})}))};d.render=function(){var a=this,c=this.state,d=c.actorData,e=c.selectedActorID;c=c.userID;return(i||(i=b("isEmpty")))(d)||!d[e]?null:b("React").jsxs("div",{className:b("joinClasses")(this.props.className,"_29ak"),ref:this.root,children:[b("React").jsx(b("PageVoiceDropdownSelector.react"),{disabled:!1,onChange:this.$2,onClick:b("emptyFunction"),pages:d,searchBarVisible:!0,selectedActorID:e,showBusinessPages:!1,showPersonalPagesInRoot:!b("BizSiteIdentifier.brands").isBizSite(),suppressed:!0,user:d[c]}),this.state.showNUX?b("React").jsx(b("React").Suspense,{fallback:null,children:b("React").jsx(j,{contextRef:function(){return a.root.current},feedback:this.props.feedback,onClose:this.$1})}):null]})};return c}(b("React").Component);e.exports=a(c,{feedback:h!==void 0?h:h=b("UFI2ActorSelector_feedback.graphql")})}),null);
__d("UFI2AddCommentLink.react",["cx","fbt","React","TrackingNodes","UFI2AbstractButtonWrapper.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){a=a.onClick;var c=h._("Write a comment\u2026");return b("React").jsx("div",{className:"_694w","data-testid":"UFI2AddCommentLink/root",children:b("React").jsx(b("UFI2AbstractButtonWrapper.react"),{className:"_694x","data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.COMMENT_LINK),"data-testid":"UFI2AddCommentLink/link",href:"#",label:c,onClick:a,role:"button"})})}e.exports=a}),null);
__d("UFI2CommentDisabledNotice.react",["cx","React","TextWithEntities.react","UFI2CometRelayCreateFragmentContainer","linkifyEntityRange","UFI2CommentDisabledNotice_feedback.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=b("UFI2CometRelayCreateFragmentContainer").createFragmentContainer;b("UFI2CometRelayCreateFragmentContainer").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.feedback;if(!a.comments_disabled_notice)return null;var c=a.comments_disabled_notice;c=b("React").jsx("div",{className:"_69g2",children:b("React").jsx(b("TextWithEntities.react"),{interpolator:b("linkifyEntityRange"),ranges:c.ranges,text:c.text})});return b("React").jsx("div",{className:(a.display_comments_count&&a.display_comments_count.count&&a.display_comments_count.count>0?"_2o30":"")+" _69g3",children:c})};return c}(b("React").Component);e.exports=a(c,{feedback:h!==void 0?h:h=b("UFI2CommentDisabledNotice_feedback.graphql")})}),null);
__d("UFI2Composer.react",["cx","fbt","invariant","requireCond","Bootloader","cr:955308","FBLogger","Random","React","ReactDOM","Run","SubscriptionsHandler","TrackingNodes","UFI2CometRelayCreateFragmentContainer","UFI2CommentRow.react","UFI2ComposerActions.react","UFI2Config","UFI2ErrorBoundary.react","UFI2ProgressiveComposerInput.react","UFICommonInteractionEvents","UFICommonInteractionLogger","UFINavigationCheck","UFIODSLogger","Vector","WebFunnelLogger","collectDataAttributes","createUFI2ComposerPluginPipeline","emptyFunction","getActiveElement","getCommentDataFromComposerState","getPlainTextFromUFI2InputState","getScrollableAreaContainingNode","gkx","ifRequired","isUFI2ComposerStateEmpty","joinClasses","killswitch","makeUFI2ClientID","memoize","nullthrows","requestAnimationFrameAcrossTransitions","setFocusOnUFI2ComposerInputState","UFI2Composer_actor.graphql","UFI2Composer_feedback.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;c=b("UFI2CometRelayCreateFragmentContainer").createFragmentContainer;b("UFI2CometRelayCreateFragmentContainer").graphql;var l=b("UFI2Config").composerInputSamplingRateDenominator;function m(a){a===void 0&&(a=b("emptyFunction"));return b("Bootloader").loadModules(["clearUFIComposerInputState"],a,"UFI2Composer.react")}var n=[],o=b("memoize")(function(){var a=l||100;return b("Random").coinflip(a)&&b("gkx")("678290")});d=function(c){__p&&__p();babelHelpers.inheritsLoose(d,c);function d(){__p&&__p();var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.$1=[],d.$2=[],d.$3=b("React").createRef(),d.$5=!1,d.$6=null,d.$7=!1,d.$8=null,d.state={UFI2ComposerPluginPipeline:b("createUFI2ComposerPluginPipeline")(d.props.initialPlugins||n),composerState:d.props.initialComposerState||{attachment:null,feedbackID:b("nullthrows")(d.props.feedback.id,"A `UFI2Composer` was mounted without a feedback target ID. This is a fatal error, since there's nothing useful a composer can do without one. Please check why the GraphQL query for this feedback object failed to materialize an ID."),formattingStyle:"PLAIN_TEXT",inputDecorators:[],inputState:b("UFI2ProgressiveComposerInput.react").createEmptyComposerState(),isLocked:!1}},d.$9=null,d.$10=new(b("SubscriptionsHandler"))(),d.$11=function(a,c){var e=d.$3.current;e=b("ReactDOM").findDOMNode(e);return e?b("collectDataAttributes")(e,a,c):null},d.$13=function(){__p&&__p();var a=d.props,c=a.actor,e=a.onCommit,f=a.relay,g=a.topLevelFeedbackID,h=a.useDefaultActor,j=b("makeUFI2ClientID")(b("UFICommonInteractionLogger").makeTrackingID()),k=c.id;k!=null||i(0,4686);var l=d.state.composerState.usedWritingHelpToCompose,n=function(a,b){b===void 0&&(b={}),e({actorID:k,clientID:j,commentData:a,entitiesByID:b,environment:f.environment,feedLocation:d.props.feedLocation,feedbackSource:d.props.feedbackSource,focusCommentID:d.props.focusCommentID,getTrackingDataFn:d.$11,topLevelFeedbackID:g,useDefaultActor:h,usedWritingHelpToCompose:l})};a=d.state.composerState.inputState;if(a.__type==="plain-text"){if(a.text.trim()===""&&d.state.composerState.attachment==null)return;d.$14();d.$12(j);c=d.state.composerState;var o=c.attachment,p=c.inReplyToComment;c=c.replyTargetClicked;n({attachments:o&&(o.__type==="ExistingAttachment"?[]:d.$1.map(function(a){return a(o)}).filter(Boolean)),feedback_id:d.state.composerState.feedbackID,formatting_style:d.state.composerState.formattingStyle,message:{text:a.text},reply_comment_parent_fbid:p==null?void 0:p.id,reply_target_clicked:c});d.setState(function(a){return{composerState:babelHelpers["extends"]({},a.composerState,{attachment:null,formattingStyle:"PLAIN_TEXT",inputState:{__type:"plain-text",selectionOffsets:{end:0,start:0},text:""},replyTargetClicked:!1,usedWritingHelpToCompose:!1})}})}else{d.$12(j);a=function(){__p&&__p();m(function(a){__p&&__p();if(d.$7===!1)return;var c=b("getCommentDataFromComposerState")({attachmentMappers:d.$1,composerState:d.state.composerState,contentBlockToTextWithEntitiesInputMessageMappers:d.$2});if(c==null){d.setState(function(a){return{composerState:babelHelpers["extends"]({},a.composerState,{isLocked:!1})}});d.props.commentAction==="EDIT"&&n(null,{});return}d.$14();n(c.commentData,c.entitiesByID);if(d.$7===!1)return;d.setState(function(b){return{composerState:babelHelpers["extends"]({},a(b.composerState),{attachment:null,formattingStyle:"PLAIN_TEXT",isLocked:!1,replyTargetClicked:!1,usedWritingHelpToCompose:!1})}})})};b("killswitch")("UFI2_FIX_COMMIT_WHILE_IN_COMPOSITION_MODE")?(d.setState(function(a){return{composerState:babelHelpers["extends"]({},a.composerState,{isLocked:!0})}}),a()):d.setState(function(a){return{composerState:babelHelpers["extends"]({},a.composerState,{isLocked:!0})}},a)}},d.$15=function(){d.$4&&!d.$5&&(new(b("WebFunnelLogger"))("UFI2ComposerWebFunnelDefinition").setSessionKey(d.$4).setAction("first_input").log(),d.$5=!0);o()&&(d.$8=b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI2_COMPOSER_KEYPRESS_LATENCY));return"not-handled"},d.$16=function(a,b){__p&&__p();d.setState(function(b){__p&&__p();b=b.composerState;if(b.isLocked)return{};var c=a(b);c&&c.inputState&&c.inputState.__type==="editor-state-based"&&c.inputState.editorState.getCurrentContent().getBlockMap().some(function(a){return a.getText()!=null})&&m();if(c){b=babelHelpers["extends"]({},b,c);return{composerState:b}}else return null},b)},d.$17=function(a){d.$6=a,d.props.onInputRefUpdated&&d.props.onInputRefUpdated(a)},d.$18=function(){if(!d.$4){var a=d.props.actor.id;a&&(d.$4=a+"_"+Date.now(),new(b("WebFunnelLogger"))("UFI2ComposerWebFunnelDefinition").setSessionKey(d.$4).setAction("focus").setFunnelTags(["depth_"+d.props.depth]).markStart().log())}},d.$19=function(a){__p&&__p();var c=d.state.composerState.inputState;switch(c.__type){case"editor-state-based":a.preventDefault();d.setState(function(a){__p&&__p();var c=a.composerState.inputState;if(c.__type!=="editor-state-based"){b("FBLogger")("ufi2").warn("While handling a focus trigger click on an editor-state-based input the `inputState` type unexpectedly changed to `%s`.",c.__type);return null}var d=c.editorState,e=d.getSelection();if(e.getHasFocus()===!1){var f=e.set("hasFocus",!0);return b("ifRequired")("EditorState",function(b){return{composerState:babelHelpers["extends"]({},a.composerState,{inputState:babelHelpers["extends"]({},c,{editorState:b.forceSelection(d,f)})})}},function(){return null})}else return null});break;case"plain-text":default:a.preventDefault(),b("getActiveElement")()!==d.$6&&d.focus()}},d.$20=function(){__p&&__p();var a;for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];(a=d.$1).push.apply(a,c);var f=!1;return{remove:function(){if(f)return;f=!0;this.$1=this.$1.filter(function(a){return c.includes(a)===!1})}}},d.$21=function(){__p&&__p();var a;for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];(a=d.$2).push.apply(a,c);var f=!1;return{remove:function(){if(f)return;f=!0;this.$2=this.$2.filter(function(a){return c.includes(a)===!1})}}},d.isUnfinished=function(){if(d.props.initialComposerState){if(d.props.initialComposerState!==d.state.composerState)return!0}else if(!b("isUFI2ComposerStateEmpty")(d.state.composerState))return!0;return!1},d.$22=function(a){var c,e=a.actions;a=a.inputProps;var f=d.props,g=f.depth;f=f.feedback;var i=a.composerState,j=a.isCommentDenied,k=b("getPlainTextFromUFI2InputState")(i.inputState).trim()!=="";f=(c=(c=(c=(c=a.placeholder)!=null?c:d.props.placeholder)!=null?c:(c=i.inReplyToComment)==null?void 0:(c=c.feedback)==null?void 0:c.comment_composer_placeholder)!=null?c:f.comment_composer_placeholder)!=null?c:g>0?h._("Write a reply\u2026"):h._("Write a comment\u2026");return b("React").jsxs("form",{className:b("joinClasses")((j?"_882o":"")+(i.isLocked?" _4w75":"")+" _129h"+(k?" _7c_q":""),a.formClassName),children:[b("React").jsx(b("UFI2ProgressiveComposerInput.react"),{className:b("joinClasses")((k===!1?"_7c_r":"")+" _4w79",a.className),composerState:a.composerState,depth:g,handleBeforeInput:d.$15,handleCommand:a.handleCommand,handleKeyCommand:a.handleKeyCommand,handlePastedFiles:a.handlePastedFiles,keyBindingFn:a.keyBindingFn,onBlur:a.onBlur,onClick:a.onClick,onCommit:a.onCommit,onComposerStateChange:a.onComposerStateChange,onFocus:a.onFocus,onInputRefUpdated:a.onInputRefUpdated,placeholder:f,ref:d.$3,webDriverTestID:a.webDriverTestID}),e?b("React").jsx(b("UFI2ComposerActions.react"),{children:e}):null]})},a)||babelHelpers.assertThisInitialized(d)}var e=d.prototype;e.$12=function(a){var c=this.props.commentAction,d=c==="ADD"?b("UFICommonInteractionEvents").UFI2_OPTIMISTIC_COMMENT:b("UFICommonInteractionEvents").UFI2_OPTIMISTIC_COMMENT_EDIT;b("UFICommonInteractionLogger").startInteraction(d,a+d);d=c==="ADD"?b("UFICommonInteractionEvents").UFI2_PERSISTED_COMMENT:b("UFICommonInteractionEvents").UFI2_PERSISTED_COMMENT_EDIT;b("UFICommonInteractionLogger").startInteraction(d,a+d)};e.componentDidUpdate=function(a,c){a=this.$8;a&&c.composerState!==this.state.composerState&&(this.$8=null,b("UFICommonInteractionLogger").endInteractionAtEndOfFrame(a))};e.$14=function(){this.$4&&(new(b("WebFunnelLogger"))("UFI2ComposerWebFunnelDefinition").setSessionKey(this.$4).setAction("commit").markEnd().log(),delete this.$4,this.$5=!1)};e.componentDidMount=function(){var c=this;this.$7=!0;var d=this.props,e=d.depth;d=d.feedbackSource;d===1&&(e===0?b("UFIODSLogger").bump("composer.newsfeed.toplevel.componentDidMount","relay"):b("UFIODSLogger").bump("composer.newsfeed.replies.componentDidMount","relay"));b("gkx")("708253")||this.$10.addSubscriptions(b("Run").onBeforeUnload(function(){return a.PageTransitions&&b("UFINavigationCheck").isLeaving(a.PageTransitions)&&c.isUnfinished()?h._("You haven't finished your comment yet. Do you want to leave without finishing?"):void 0}))};e.componentWillUnmount=function(){this.$7=!1,this.$10.release(),window.cancelAnimationFrame(this.$9)};e.execCommand=function(a){this.$3.current?this.$3.current.execCommand(a):b("FBLogger")("ufi2").warn("Someone tried to run a `%s` command, but a ref to the composer was not yet available.",a.__type)};e.focus=function(){__p&&__p();var a=this,c=this.$6;c&&this.$16(function(d){__p&&__p();var e=b("getScrollableAreaContainingNode")(c);if(e){var f=e.getScrollTop();a.$9=b("requestAnimationFrameAcrossTransitions")(function(){e.setScrollTop(f,!1)})}else{var g=b("Vector").getScrollPosition();a.$9=b("requestAnimationFrameAcrossTransitions")(function(){window.scrollTo(g.x,g.y)})}d.inputState.__type==="plain-text"&&c.focus();return b("setFocusOnUFI2ComposerInputState")(d)})};e.render=function(){var a=this.props,c=a.actor,d=a.className;a=a.depth;var e=this.state.UFI2ComposerPluginPipeline;return b("React").jsx(b("UFI2ErrorBoundary.react"),{children:b("React").jsxs(b("React").Fragment,{children:[b("cr:955308")!=null?b("React").jsx(b("cr:955308"),{isUnfinished:this.isUnfinished}):null,b("React").jsx(b("UFI2CommentRow.react"),{actor:c,className:d,"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.ADD_COMMENT_BOX),"data-testid":"UFI2Composer/root",depth:a,isComposer:!0,onAvatarClick:this.$19,children:b("React").jsx(e,{actions:this.props.actions||n,initialComposerState:this.props.initialComposerState,inputProps:{commentAction:this.props.commentAction,composerState:this.state.composerState,depth:a,formClassName:this.props.formClassName,onClick:this.$19,onCommit:this.$13,onComposerStateChange:this.$16,onFocus:this.$18,onInputRefUpdated:this.$17},onInstallAttachmentMappers:this.$20,onInstallContentBlockToTextWithEntitiesInputMessageMappers:this.$21,render:this.$22})})]})})};return d}(b("React").Component);d.displayName="UFI2Composer";e.exports=c(d,{actor:j!==void 0?j:j=b("UFI2Composer_actor.graphql"),feedback:k!==void 0?k:k=b("UFI2Composer_feedback.graphql")})}),null);
__d("getConsumerFacebookUFI2ComposerPlugins",["requireCond","JSResource","RelayModern","UFI2Config","createUFI2AssociateReplyWithParentComposerPlugin","cr:1197524","createUFI2ComposerStateSnapshotComposerPlugin","createUFI2ComposerTipPlugin","cr:1004781","cr:1004782","createUFI2EmojiComposerPlugin","createUFI2EmoticonsComposerPlugin","createUFI2GIFComposerPlugin","createUFI2HashtagComposerPlugin","createUFI2MediaUploadComposerPlugin","createUFI2MentionsComposerPlugin","createUFI2PrefillMentionComposerPlugin","createUFI2SetReplyClickedComposerPlugin","cr:1101374","createUFI2StarsComposerPlugin","createUFI2StickersComposerPlugin","cr:1004783","getConsumerFacebookUFI2ComposerPlugins_feedback.graphql","getConsumerFacebookUFI2ComposerPlugins_group.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;b("RelayModern").graphql;var i=b("JSResource")("createUpgradedUFI2GroupMentionsComposerPlugin").__setRef("getConsumerFacebookUFI2ComposerPlugins"),j=b("JSResource")("createUpgradedUFI2MentionsComposerPlugin").__setRef("getConsumerFacebookUFI2ComposerPlugins");g!==void 0?g:g=b("getConsumerFacebookUFI2ComposerPlugins_feedback.graphql");h!==void 0?h:h=b("getConsumerFacebookUFI2ComposerPlugins_group.graphql");function a(a){__p&&__p();var c,d=a.environment,e=a.feedback,f=a.group;a=a.pluginsToInsertBeforePositions;var g=e.mentions_datasource_js_constructor_args_json;return[e.composer_tip!=null?b("createUFI2ComposerTipPlugin")({composer_tip:e.composer_tip}):null,b("cr:1004783")&&b("UFI2Config").shouldShowWritingHelp?b("cr:1004783")():null,f?b("createUFI2MentionsComposerPlugin")({maxResults:5,mentions_datasource_js_constructor_args_json:g,typeaheadViewProps:{__type:"GroupMentions",sortFn:function(a,b){__p&&__p();var c=a.getAuxiliaryData().renderType,d=b.getAuxiliaryData().renderType;if(c===d){var e=a.getAuxiliaryData().indexRank,f=b.getAuxiliaryData().indexRank;if(e===-1&&f!==-1)return-1;else if(e!==-1&&f===-1)return 1;else return a.getOrder()-b.getOrder()}e={bot:1,member:0,non_member:2,place:3};return e[c]-e[d]},viewProps:{bot:{aux:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.bot_aux:c:c,title:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.bot_title:c:c},member:{aux:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.member_aux:c:c,title:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.member_title:c:c},nonMember:{aux:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.nonmember_aux:c:c,title:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.nonmember_title:c:c}}},upgradedPluginResource:i}):b("createUFI2MentionsComposerPlugin")({maxResults:5,mentions_datasource_js_constructor_args_json:g,typeaheadViewProps:{},upgradedPluginResource:j})].concat(e.can_viewer_comment_with_stars===!0?b("createUFI2StarsComposerPlugin")({environment:d,feedbackID:(f=e)!=null?f.id:f}):[],[b("createUFI2HashtagComposerPlugin")(),b("cr:1004782")?b("cr:1004782")({size:10}):null],a?a["1"]||[]:[],b("createUFI2EmojiComposerPlugin")({size:16}),a?a["2"]||[]:[],[b("createUFI2EmoticonsComposerPlugin")({size:16}),b("cr:1004781")?b("cr:1004781")({environment:d,ftentidentifier:e==null?void 0:e.id,trackingID:null}):null],a?a["3"]||[]:[],[e.can_viewer_comment_with_photo===!0&&e.can_viewer_comment_with_video===!0?b("createUFI2MediaUploadComposerPlugin")({feedback:e}):null],a?a["4"]||[]:[],e.can_viewer_comment_with_gif===!0?b("createUFI2GIFComposerPlugin")({ftentidentifier:e==null?void 0:e.id}):[],a?a["5"]||[]:[],e.can_viewer_comment_with_sticker===!0?b("createUFI2StickersComposerPlugin")({environment:d,targetID:(c=e)!=null?(c=c.owning_profile)!=null?c.id:c:c}):[],[b("cr:1197524")!=null&&(e==null?void 0:(g=e.viewer_actor)==null?void 0:(f=g.user_avatar)==null?void 0:f.has_fb_app_avatar)===!0?b("cr:1197524")({}):null,b("createUFI2PrefillMentionComposerPlugin")(),b("createUFI2AssociateReplyWithParentComposerPlugin")(),b("createUFI2SetReplyClickedComposerPlugin")(),e.can_see_voice_switcher===!0||e.flat_threading_config!=null?b("createUFI2ComposerStateSnapshotComposerPlugin")():null,b("cr:1101374")!=null?b("cr:1101374")({environment:d,ftentidentifier:e==null?void 0:e.id,surface:"newsfeed_comment_www"}):null]).filter(Boolean)}e.exports=a}),null);
__d("UFI2GIFNUX.react",["fbt","AsyncRequest","React","XFeedNUXSaveSeenStateController","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","gif_comments").setBool("seen",!0).getURI();new(b("AsyncRequest"))(a).send()};d.render=function(){var a=this.props,c=a.onClose;a=a.contextRef;return b("React").jsx(b("XUIAmbientNUX.react"),{alignment:"right",contextRef:a,onCloseButtonClick:c,position:"above",shown:!0,children:g._("You can now add GIFs to comments")})};return c}(b("React").PureComponent);e.exports=a}),null);