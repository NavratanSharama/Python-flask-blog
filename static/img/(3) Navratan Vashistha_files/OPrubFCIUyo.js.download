if (self.CavalryLogger) { CavalryLogger.start_js(["HBaHd"]); }

__d("SUISpinnerTestSlow.react",["cx","fbt","LoadingMarker.react","React","SUIComponent","SUITheme","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=Math.PI;a=.75;var j=1.5;c={arcSpread:a,background:"light",size:"large"};d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$SUISpinner3=function(a){c.$SUISpinner1=a},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$SUISpinner2()};d.componentDidUpdate=function(){this.$SUISpinner2()};d.$SUISpinner2=function(){__p&&__p();var a=this.$SUISpinner1,c=a&&a.getContext("2d");if(!a||!c)return;var d=b("SUITheme").get(this).SUISpinner,e=d.sizes[this.props.size],f=e.border;e=e.diameter;var g=window.devicePixelRatio||1,h=this.props.background==="dark",k=h?d.darkActiveColor:d.activeColor;h=h?d.darkBackgroundColor:d.backgroundColor;d=e/2*g;e=f*g;f=(d+e)*2;a.height=a.width=f;a.style.width=a.style.height=f/g+"px";c.lineCap="round";c.lineWidth=e;a=f/2;c.beginPath();c.arc(a,a,d,0,2*i);c.strokeStyle=h;c.stroke();c.beginPath();c.arc(a,a,d,j*i,(j+this.props.arcSpread)%2*i);c.strokeStyle=k;c.stroke()};d.render=function(){var a=this.props.animationDuration,c=b("SUITheme").get(this).SUISpinner;c=c.sizes[this.props.size];var d=c.border;c=c.diameter;c=c+d*2;d={};a!==void 0&&(d.style={animationDuration:a+"ms"});return b("React").jsx(b("LoadingMarker.react"),{children:b("React").jsx("span",{"aria-busy":!0,"aria-valuemax":360,"aria-valuemin":0,"aria-valuetext":h._("Loading..."),className:b("joinClasses")("_4cgy",this.props.className,this.props.margin),"data-testid":this.props["data-testid"],role:"progressbar",style:babelHelpers["extends"]({},this.props.style,{height:c,width:c}),children:b("React").jsx("canvas",babelHelpers["extends"]({className:"_1lid",ref:this.$SUISpinner3},d))})})};return c}(b("SUIComponent"));d.propTypes={background:(f=b("prop-types")).oneOf(["dark","light"]).isRequired,className:f.string,margin:f.string,size:f.oneOf(["large","small"]).isRequired,theme:f.instanceOf(b("SUITheme"))};d.defaultProps=c;e.exports=d}),null);
__d("FantailLogger",["FantailConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=b("FantailConfig").FantailLogQueue;a={debug:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).debug.apply(c,[b].concat(e))},info:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).info.apply(c,[b].concat(e))},warn:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).warn.apply(c,[b].concat(e))},error:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).error.apply(c,[b].concat(e))}};e.exports=a}),null);
__d("MqttWsClientTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("MqttLogger",["BanzaiODS","ChannelClientID","FantailLogger","FBLogger","Log","LogHistory","MqttEnv","MqttUtils","MqttWsClientTypedLoggerLite","Random","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").Env,h=b("MqttWsClientTypedLoggerLite").log,i=b("Random").coinflip,j="mqtt_client",k="MqttJsClient",l=100,m=null,n={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",CLIENT_ERROR:"mqtt_client_error",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"};a=function(){__p&&__p();a.getInstance=function(){m||(m=new a());return m};function a(){this.$1=b("LogHistory").getInstance(j),this.$2=0,this.$3=b("gkx")("778292"),this.$4=Date.now(),this.$5=b("ChannelClientID").getID()}var c=a.prototype;c.setAppId=function(a){this.$2===0&&(this.$2=a)};c.eventLogConnect=function(a){var c=a.sessionID,d=a.connectionStatus,e=a.duration,f=a.hostname,h=a.attemptNumber;a.failTotal;a.successTotal;var i=a.subscribedTopics,j=a.publishes,k=a.errorCode;a=a.errorMessage;var l=d?"success":"failed";this.bumpCounter(n.CONNECT+"."+l);l={device_id:this.$5,session_id:c,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,connection_status:d,duration:e,hostname:f,feature_availability:b("MqttUtils").getWSAvailability(),attempt_number:h,subscribed_topics:i,publishes:j,error_code:k,error_message:a};this.$6(n.CONNECT,l)};c.eventLogPull=function(a){var b=a.pullEventName,c=a.sessionID,d=a.status,e=a.duration,f=a.hostname;a=a.errorMessage;c={device_id:this.$5,session_id:c,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,connection_status:d,duration:e,hostname:f,error_message:a};this.$6(b,c)};c.eventLogPullFinish=function(a){var b=a.pullEventName,c=a.sessionID,d=a.duration,e=a.errorMessage,f=a.publishReceived;a=a.publishSent;c={device_id:this.$5,session_id:c,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,duration:d,error_message:e,publish_received:f,publish_sent:a};this.$6(b,c)};c.eventLogDisconnect=function(a){var b=a.sessionID,c=a.errorCode,d=a.errorMessage;a=a.duration;this.bumpCounter(n.DISCONNECT);b={device_id:this.$5,session_id:b,href:window.location.hostname,duration:a,error_code:c,error_message:d};this.$6(n.DISCONNECT,b)};c.eventLogSocketError=function(a){var c=a.sessionID,d=a.errorCode;a=a.errorMessage;if(!b("gkx")("1186740"))return;c={device_id:this.$5,session_id:c,href:window.location.hostname,error_code:d,error_message:a};this.$6(n.SOCKET_DISCONNECT,c)};c.eventLogPublish=function(a){var b=a.topic,c=a.qos,d=a.payloadSizeBytes,e=a.success,f=a.protocol;a=a.errorMessage;this.bumpCounter(n.PUBLISH+"."+b);b={device_id:this.$5,href:window.location.hostname,topic:b,qos:c,payload_size_bytes:d,success:e?1:0,protocol:f,error_message:a};this.$6(n.PUBLISH,b)};c.logError=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{b("FBLogger")(j).catching(a).mustfix(c),d.$7(b("FantailLogger").error,c)}catch(a){}})};c.eventLogPublishTimeout=function(a){a=a.topic;a={device_id:this.$5,href:window.location.hostname,topic:a};this.$6(n.PUBLISH_TIMEOUT,a)};c.eventLogMiscellaneousError=function(a){a=a.errorMessage;a={device_id:this.$5,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,error_message:a,time_passed:Date.now()-this.$4};this.$6(n.CLIENT_ERROR,a)};c.logIfLoggedOut=function(){if(!b("gkx")("1186990")||g.isUserLoggedInNow())return;var a={logged_in:g.isUserLoggedInNow(),href:window.location.href,error_message:"Not logged in",time_passed:Date.now()-this.$4};this.$6(n.CLIENT_ERROR,a)};c.logErrorWarn=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{b("FBLogger")(j).catching(a).warn(c),d.$7(b("FantailLogger").warn,c)}catch(a){}})};c.logWarn=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{d.$1.warn(a,c),d.$7(b("FantailLogger").warn,c)}catch(a){}})};c.debugTrace=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{d.$1.debug(a,c),d.$7(b("FantailLogger").debug,c)}catch(a){}})};c.bumpCounter=function(a){var c=this;if(!i(l))return;g.scheduleLoggingCallback(function(){c.$2!==0&&b("BanzaiODS").bumpEntityKey(2966,"mqtt_ws_client",c.$2+"."+a,l),b("BanzaiODS").bumpEntityKey(2966,"mqtt_ws_client",a,l)})};c.$6=function(a,c){var d=this;g.scheduleLoggingCallback(function(){c.event_type=a;c.app_id=d.$2;c.online=d.$8();var e=JSON.stringify(c);d.$1.log(a,e);a!==n.DISCONNECT&&h(c);d.$7(b("FantailLogger").info,e)})};c.$7=function(a,c){g.scheduleLoggingCallback(function(){b("gkx")("676936")&&a(k,c)})};c.$8=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};return a}();e.exports=a}),null);
__d("MqttEnvInitializer",["CurrentUser","JSScheduler","MqttEnv","MqttLogger","Random","WebStorage","clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MqttEnv").MqttGkNames,i=b("MqttEnv").Env,j="mqtt:",k={genGk:function(a){__p&&__p();switch(a){case h.mqtt_waterfall_log_client_sampling:return b("gkx")("832242");case h.messenger_uses_mqtt_rollout:return!0;case h.mqtt_ws_polling_enabled:return!0;case h.mqtt_ws_forced_polling_only:return b("gkx")("865724");case h.mqtt_send_unload_event:return b("gkx")("901339");case h.mqtt_ws_reconnect_reset:return b("gkx")("807517");case h.mqtt_lp_use_fetch:return b("gkx")("945829");case h.mqtt_fast_lp:return b("gkx")("1001007");case h.mqtt_lp_no_delay:return b("gkx")("1066746");case h.mqtt_enable_publish_over_polling:return b("gkx")("968609");default:b("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+a);return!1}},useJSScheduler:function(a){return b("gkx")("987139")?a:null},initialize:function(){__p&&__p();i.initialize(b("Random").random,b("CurrentUser").isLoggedInNow,b("clearTimeout"),b("setTimeoutAcrossTransitions"),function(){return b("MqttLogger").getInstance()},k.genGk,null,k.useJSScheduler(b("JSScheduler").scheduleNormalPriCallback),k.useJSScheduler(b("JSScheduler").scheduleLoggingPriCallback),function(a,c){var d=(g||(g=b("WebStorage"))).getLocalStorage();if(d){d=d.getItem(j+a);if(d!=null)return d}return c},function(a,c){var d=(g||(g=b("WebStorage"))).getLocalStorage();d&&(c==null?d.removeItem(j+a):d.setItem(j+a,c))})}};e.exports=k}),null);
__d("FBMqttChannel",["MqttChannel","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f){"use strict";b("MqttEnvInitializer").initialize();e.exports=new(b("MqttChannel"))({endpoint:(a=b("MqttWebConfig")).endpoint,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid,appId:a.appID,initialSubscribedTopics:a.subscribedTopics,capabilities:a.capabilities,clientCapabilities:a.clientCapabilities,chatVisibility:a.chatVisibility})}),null);